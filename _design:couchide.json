{
 "comment": "This is the CouchIDE design doc, when placed in a database it creates a sort of webserver for you. Documentation at: https://github.com/vhv/CouchIDE",
 "version": "0.2",
 "_id": "_design/couchide",
 "views": {
 "type-doc": {
 "map": "function(doc) { emit(doc.type, doc) }"
 }
 },
 "rewrites": [
   {
     "from": "/couchide",
     "to": "couch.ide"
   },
   {
     "from": "/couchide/*",
     "to": "couch.ide"
   },
   {
     "from": "/",
     "to": "_show/render/index.html"
   },
   {
     "from": "/_session/",
     "to": "../../../_session/"
   },
   {
     "from": "/api/",
     "to": "../../../"
   },
   {
     "from": "/*",
     "to": "_show/render/*"
   }
 ],
 "shows": {
   "render": "function(doc, req) { return { \"headers\": { \"Content-Type\": doc.type }, \"body\": doc.body } }"
  },
  "_attachments": {
    "couch.ide": {
      "content_type": "text/html",
      "data": "PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0idXRmLTgiPg0KICA8dGl0bGU+Q291Y2hJREU8L3RpdGxlPg0KICANCiAgPHN0eWxlPg0KICAgIA0KICAgIEBpbXBvcnQgdXJsKGh0dHA6Ly93ZWxvdmVpY29uZm9udHMuY29tL2FwaS8/ZmFtaWx5PWVudHlwbyk7DQogICAgQGltcG9ydCB1cmwoaHR0cDovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9U291cmNlK1NhbnMrUHJvOjIwMCw0MDAsNjAwfFNvdXJjZStDb2RlK1Bybyk7DQogICAgDQogICAgDQogICAgLyogZW50eXBvICovDQogICAgW2NsYXNzKj0iZW50eXBvLSJdOmJlZm9yZSB7DQogICAgICBmb250LWZhbWlseTogJ2VudHlwbycsIHNhbnMtc2VyaWY7DQogICAgICBtYXJnaW4tcmlnaHQ6IDAuNWVtOw0KICAgIH0NCiAgICANCiAgICBoMSwgaDIsIGgzLCBoNCB7DQogICAgICBmb250LXdlaWdodDogNDAwOw0KICAgICAgbWFyZ2luOiAwOw0KICAgIH0NCiAgICANCiAgICBib2R5IHsNCiAgICAgIGZvbnQtZmFtaWx5OiAiU291cmNlIFNhbnMgUHJvIjsNCiAgICAgIG1hcmdpbjogMzBweCAzMjBweCA0MHB4IDA7DQogICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICBiYWNrZ3JvdW5kOiBoc2xhKDAsMCUsOTUlLDEpOw0KICAgIH0NCiAgICBhIHsNCiAgICAgICAgY29sb3I6ICNkNDE0NWE7DQogICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCiAgICB9DQogICAgaW5wdXQgew0KICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICB3aWR0aDogMTAwJTsNCiAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICB9DQogICAgdGV4dGFyZWEgew0KICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICB3aWR0aDogMTAwJTsNCiAgICAgIGhlaWdodDogYXV0bzsNCiAgICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICB9DQogICAgLmJvZHkgdGV4dGFyZWEgew0KICAgICAgZm9udC1mYW1pbHk6ICJTb3VyY2UgQ29kZSBQcm8iOw0KICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgcGFkZGluZzogMWVtOw0KICAgIA0KICAgICAgbWluLWhlaWdodDogNDAwcHg7DQogICAgfQ0KICAgIA0KICAgIHNlY3Rpb24uc2lkZWJhciB7DQogICAgICBmb250LWZhbWlseTogIlNvdXJjZSBTYW5zIFBybyI7DQogICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgcmlnaHQ6IDA7DQogICAgICB3aWR0aDogMzAwcHg7DQogICAgICBib3R0b206IDA7DQogICAgICB0b3A6IDQwcHg7DQogICAgICBiYWNrZ3JvdW5kOiBoc2xhKDAsMCUsOTAlLDEpOw0KICAgICAgcGFkZGluZzogMjBweDsNCiAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgaHNsYSgwLDAlLDcwJSwxKTsNCiAgICB9DQogICAgLnNpZGViYXIgdWwgew0KICAgICAgcGFkZGluZzogMDsNCiAgICB9DQogICAgLnNpZGViYXIgbGkgew0KICAgICAgbGlzdC1zdHlsZTogbm9uZTsNCiAgICAgIHBhZGRpbmc6IDAuNWVtIDA7DQogICAgfQ0KICAgIC5zaWRlYmFyIGxpOmJlZm9yZSB7DQogICAgICBmb250LWZhbWlseTogJ2VudHlwbyc7DQogICAgICBjb250ZW50OiAiXDFGNEM0IjsNCiAgICAgIG1hcmdpbi1yaWdodDogMC41ZW07DQogICAgICBjb2xvcjogI2Q0MTQ1YTsNCiAgICB9DQogICAgLnNpZGViYXIgbGk6aG92ZXI6YmVmb3JlIHsNCiAgICAgIGNvbnRlbnQ6ICJcMjcwRSI7DQogICAgICBvcGFjaXR5OiAxOw0KICAgIH0NCiAgICBhLm5ld2ZpbGU6YmVmb3JlIHsNCiAgICAgIGZvbnQtZmFtaWx5OiAnZW50eXBvJzsNCiAgICAgIGNvbnRlbnQ6ICJcMjI5RSI7DQogICAgICBtYXJnaW4tcmlnaHQ6IDAuNWVtOw0KICAgICAgY29sb3I6ICNkNDE0NWE7DQogICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQogICAgfQ0KICAgIA0KICAgIC50b3BiYXIgew0KICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgIHRvcDogMDsNCiAgICAgIGxlZnQ6IDA7DQogICAgICByaWdodDogMDsNCiAgICAgIGhlaWdodDogNDBweDsNCiAgICAgIGJhY2tncm91bmQ6IGhzbGEoMCwwJSwyMCUsMSk7DQogICAgICBjb2xvcjogd2hpdGU7DQogICAgICBwYWRkaW5nOiAxMXB4Ow0KICAgIH0NCiAgICBoMSB7DQogICAgICBkaXNwbGF5OiBpbmxpbmU7DQogICAgICBwYWRkaW5nOiAwOw0KICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgbWFyZ2luOiAwOw0KICAgICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgICAgIG1hcmdpbi1yaWdodDogMzBweDsNCiAgICB9DQogICAgaDEgYTpsaW5rLCBoMSBhOnZpc2l0ZWQgew0KICAgICAgY29sb3I6IHdoaXRlOw0KICAgIH0NCiAgICBoMi5maWxlbmFtZSB7DQogICAgICBkaXNwbGF5OiBpbmxpbmU7DQogICAgICBwYWRkaW5nOiAwOw0KICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgbWFyZ2luOiAwOw0KICAgICAgZm9udC13ZWlnaHQ6IDIwMDsNCiAgICB9DQogICAgaDIuZmlsZW5hbWU6YmVmb3JlIHsNCiAgICAgIGZvbnQtZmFtaWx5OiAnZW50eXBvJzsNCiAgICAgIGNvbnRlbnQ6ICJcMjcwRSI7DQogICAgICBtYXJnaW4tcmlnaHQ6IDAuNWVtOw0KICAgIH0NCiAgICANCiAgICAubW9kYWwgew0KICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgd2lkdGg6IDQwMHB4Ow0KICAgICAgbGVmdDo1MCU7DQogICAgICB0b3A6IDUwJTsNCiAgICAgIG1hcmdpbi1sZWZ0Oi0yMDBweDsNCiAgICAgIG1hcmdpbi10b3A6IC0xMDBweDsNCiAgICAgIGJhY2tncm91bmQ6ICNlZWU7DQogICAgICB6LWluZGV4OiAxMDA7DQogICAgICBwYWRkaW5nOiA0MHB4Ow0KICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgYm9yZGVyLXJhZGl1czogMnB4Ow0KICAgICAgYm94LXNoYWRvdzogMHB4IDBweCAxMHB4IGhzbGEoMCwwJSwwJSwwLjMpOw0KICAgICAgYm9yZGVyOiAxcHggc29saWQgaHNsYSgwLDAlLDcwJSwxKTsNCiAgICB9DQogICAgDQogICAgLmVkaXQgew0KICAgICAgcGFkZGluZzogMjBweDsNCiAgICAgIHotaW5kZXg6IC0xMDA7DQogICAgfQ0KICAgIA0KICAgIC5ib3R0b21iYXIgew0KICAgICAgZm9udC1mYW1pbHk6ICJTb3VyY2UgU2FucyBQcm8iOw0KICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgYm90dG9tOiAwOw0KICAgICAgbGVmdDogMDsNCiAgICAgIHJpZ2h0OiAzMDBweDsNCiAgICAgIGJhY2tncm91bmQ6IGhzbGEoMCwwJSw5NSUsMSk7DQogICAgICBib3JkZXItdG9wOiAxcHggc29saWQgaHNsYSgwLDAlLDcwJSwxKTsNCiAgICAgIG1hcmdpbjogMDsNCiAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICBoZWlnaHQ6IDQwcHg7DQogICAgfQ0KICAgIA0KICAgIGJ1dHRvbiB7DQogICAgICBkaXNwbGF5OiBpbmxpbmU7DQogICAgICBib3JkZXI6IDFweCBzb2xpZCBoc2xhKDAsMCUsNzAlLDEpOw0KICAgICAgYm9yZGVyLXJhZGl1czogM3B4Ow0KICAgICAgYmFja2dyb3VuZDogaHNsYSgwLDAlLDEwMCUsMCk7DQogICAgICBmb250LWZhbWlseTogIlNvdXJjZSBTYW5zIFBybyI7DQogICAgICBmb250LXdlaWdodDogNDAwOw0KICAgICAgZm9udC1zaXplOiAxZW07DQogICAgICBtaW4td2lkdGg6IDEwMHB4Ow0KICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgIHBhZGRpbmc6IDdweCAyMHB4IDdweCAxMHB4Ow0KICAgIH0NCiAgICBidXR0b246aG92ZXIgew0KICAgICAgYmFja2dyb3VuZDogaHNsYSgwLDAlLDEwMCUsMC43KTsNCiAgICB9DQogICAgZGl2LnNhdmUgew0KICAgICAgZmxvYXQ6IHJpZ2h0Ow0KICAgICAgcGFkZGluZzogMHB4Ow0KICAgIH0NCiAgICBidXR0b24uc2F2ZSB7DQogICAgICBjb2xvcjogaHNsYSgxNDgsMTAwJSwyOCUsMSk7DQogICAgICBmb250LXdlaWdodDogNjAwOw0KICAgIH0NCiAgICBidXR0b24uZGVsZXRlIHsNCiAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7DQogICAgfQ0KICAgIC5kZWxldGUgYnV0dG9uLnllcyB7DQogICAgICBjb2xvcjogaHNsYSgzNTUsODQlLDQwJSwxKQ0KICAgIH0NCiAgICBkaXYuZGVsZXRlZCB7DQogICAgICBmbG9hdDogbGVmdDsNCiAgICAgIHBhZGRpbmc6IDBweDsNCiAgICB9DQogICAgZGl2LnN0YXR1cyB7DQogICAgICBjb2xvcjogaHNsYSgwLDAlLDAlLDEpOw0KICAgICAgZmxvYXQ6IHJpZ2h0Ow0KICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICBwYWRkaW5nOiAxMHB4IDEwcHggMjBweCAxMHB4Ow0KICAgIH0NCiAgICBkaXYuc3RhdHVzIHAgew0KICAgICAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgICAgIG1hcmdpbjogMDsNCiAgICAgIHBhZGRpbmc6IDA7DQogICAgfQ0KICAgIA0KICAgIFtjb250ZW50ZWRpdGFibGVdLCB0ZXh0YXJlYSwgaW5wdXQgew0KICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgIGJvcmRlcjogMnB4IHNvbGlkIGhzbGEoMzM0LDg1JSw1MiUsMC4xKTsNCiAgICAgIC8qbWFyZ2luOiAtNXB4IC01cHggLTVweCAtNXB4OyovDQogICAgICBtYXJnaW4tdG9wOiAtNXB4Ow0KICAgICAgbWFyZ2luLXJpZ2h0OiAtNXB4Ow0KICAgICAgbWFyZ2luLWxlZnQ6IC01cHg7DQogICAgICBwYWRkaW5nOiA1cHg7DQogICAgICBvdXRsaW5lOiBub25lOw0KICAgIH0NCiAgICANCiAgICBbY29udGVudGVkaXRhYmxlXTpob3ZlciwgdGV4dGFyZWE6aG92ZXIsIGlucHV0OmhvdmVyIHsNCiAgICAgIGJvcmRlcjogMnB4IHNvbGlkIGhzbGEoMzM0LDg1JSw1MiUsMC41KTsNCiAgICAgIG91dGxpbmU6IG5vbmU7DQogICAgfQ0KICAgIA0KICAgIFtjb250ZW50ZWRpdGFibGVdOmZvY3VzLCB0ZXh0YXJlYTpmb2N1cywgaW5wdXQ6Zm9jdXMgew0KICAgICAgYm9yZGVyOiAycHggc29saWQgaHNsYSgzMzQsODUlLDUyJSwxKTsNCiAgICAgIG91dGxpbmU6IG5vbmU7DQogICAgfQ0KICAgIA0KICAgIHNlY3Rpb24uZWRpdG9yIHsNCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgIGxlZnQ6IDA7DQogICAgICB0b3A6IDQwcHg7DQogICAgICBib3R0b206IDYxcHg7DQogICAgICByaWdodDogMjgwcHg7DQogICAgICB6LWluZGV4OiAtMTAwOw0KICAgIH0NCiAgICAjZWRpdG9yIHsgDQogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICBsZWZ0OiAwOw0KICAgICAgdG9wOiAwOw0KICAgICAgYm90dG9tOiAwOw0KICAgICAgcmlnaHQ6IDA7DQogICAgfQ0KICAgIA0KICAgIEBtZWRpYSAobWF4LXdpZHRoOiA2MDBweCkgew0KICAgICAgYm9keSwgLm1vZGFsLCAudG9wYmFyLCBzZWN0aW9uLnNpZGViYXIsIHNlY3Rpb24uZWRpdG9yLCAuYm90dG9tYmFyIHsNCiAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgaGVpZ2h0OiBhdXRvOw0KICAgICAgICBtYXJnaW46IDA7DQogICAgICAgIGxlZnQ6IDA7DQogICAgICAgIHRvcDogMDsNCiAgICAgICAgYm90dG9tOiAwOw0KICAgICAgICByaWdodDogMDsNCiAgICAgIH0NCiAgICAgIHNlY3Rpb24uZWRpdG9yIHsNCiAgICAgICAgei1pbmRleDogMTAwOw0KICAgICAgfQ0KICAgICAgLmJvdHRvbWJhciAuZGVsZXRlZCwgLmJvdHRvbWJhciAuZGVsZXRlLCAuYm90dG9tYmFyIC5zYXZlLCAuYm90dG9tYmFyIGRpdi5zdGF0dXMgew0KICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgZmxvYXQ6IG5vbmU7DQogICAgICB9DQogICAgfQ0KICAgIA0KICA8L3N0eWxlPg0KICANCiAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9ImluaXRpYWwtc2NhbGU9MSI+DQoNCjwvaGVhZD4NCjxib2R5Pg0KICA8c2VjdGlvbiBjbGFzcz0idG9wYmFyIj4NCiAgICAgPGgxPg0KICAgICAgICBDb3VjaElERSAwLjINCiAgICAgPC9oMT4NCiAgICAgPGgyIGNsYXNzPSJmaWxlbmFtZSI+DQogICAgICAgICANCiAgICAgPC9oMj4NCiAgPC9zZWN0aW9uPg0KICAgICAgDQogIDxkaXYgY2xhc3M9Im1vZGFsIG5ld2ZpbGUiPg0KICAgIDxwPldoYXQgbmFtZSBzaG91bGQgeW91ciBmaWxlIGhhdmU/PC9wPg0KICAgIDxpbnB1dCBuYW1lPSJfaWQiIGNsYXNzPSJmaWVsZCBfaWQiIHBsYWNlaG9sZGVyPSJGaWxlbmFtZSI+DQogICAgPHNlbGVjdCBjbGFzcz0iZmllbGQgdHlwZSI+DQogICAgICA8b3B0aW9uIHZhbHVlPSJ0ZXh0L3BsYWluIj5QbGFpbiB0ZXh0PC9vcHRpb24+DQogICAgICA8b3B0aW9uIHZhbHVlPSJ0ZXh0L2h0bWwiPkhUTUw8L29wdGlvbj4NCiAgICAgIDxvcHRpb24gdmFsdWU9InRleHQvY3NzIj5DU1M8L29wdGlvbj4NCiAgICAgIDxvcHRpb24gdmFsdWU9ImFwcGxpY2F0aW9uL2phdmFzY3JpcHQiPkphdmFzY3JpcHQ8L29wdGlvbj4NCiAgICAgIDxvcHRpb24gdmFsdWU9ImFwcGxpY2F0aW9uL2pzb24iPkpTT048L29wdGlvbj4NCiAgICA8L3NlbGVjdD4NCiAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9Im5ld2ZpbGUgZW50eXBvLXBsdXMiPkNyZWF0ZSBmaWxlPC9idXR0b24+DQogICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJjYW5jZWwiPk5vLCBDYW5jZWw8L2J1dHRvbj4NCiAgPC9kaXY+ICAgIA0KICANCiAgPGRpdiBjbGFzcz0ibW9kYWwgZGVsZXRlIj4NCiAgICA8cD5BcmUgeW91IHN1cmUgeW91IHdpc2ggdG8gZGVsZXRlIHRoaXMgZmlsZT88L3A+DQogICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJ5ZXMgZW50eXBvLWVyYXNlIj5ZZXMsIERlbGV0ZTwvYnV0dG9uPg0KICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iY2FuY2VsIj5ObywgQ2FuY2VsPC9idXR0b24+DQogIDwvZGl2PiAgICANCg0KICA8c2VjdGlvbiBjbGFzcz0ic2lkZWJhciI+DQogICAgPGgyPkZpbGVzOjwvaDI+DQogICAgPHVsIGNsYXNzPSJmaWxlcyI+DQogICAgICA8bGk+Tm8gZmlsZXM8L2xpPg0KICAgIDwvdWw+DQogICAgPGEgaHJlZj0iIy9uZXciIGNsYXNzPSJuZXdmaWxlIj5OZXcgZmlsZTwvYT4NCiAgPC9zZWN0aW9uPg0KICANCiAgPHNlY3Rpb24gY2xhc3M9ImJvdHRvbWJhciI+DQogICAgPGRpdiBjbGFzcz0ic2F2ZSI+DQogICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0ic2F2ZSBlbnR5cG8tY2hlY2siPlNhdmU8L2J1dHRvbj4NCiAgICA8L2Rpdj4NCiAgICA8ZGl2IGNsYXNzPSJzdGF0dXMiPjxwIGNsYXNzPSJlbnR5cG8tYXR0ZW50aW9uIj5FZGl0b3Igbm90IGxvYWRlZCB5ZXQhPC9wPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImRlbGV0ZWQiPg0KICAgICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJkZWxldGUgZW50eXBvLWNhbmNlbC1jaXJjbGVkIj5EZWxldGU8L2J1dHRvbj4NCiAgICA8L2Rpdj4NCiAgPC9zZWN0aW9uPg0KDQogIDxzZWN0aW9uIGNsYXNzPSJlZGl0b3IiPjxkaXYgaWQ9ImVkaXRvciI+UGxlYXNlIG9wZW4gYSBmaWxlITwvZGl2Pjwvc2VjdGlvbj4NCiAgDQogIDxzY3JpcHQgc3JjPSIvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9qcXVlcnkvMi4wLjMvanF1ZXJ5Lm1pbi5qcyIgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBjaGFyc2V0PSJ1dGYtOCI+PC9zY3JpcHQ+DQogIDxzY3JpcHQgc3JjPSIvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9hY2UvMS4xLjAxL2FjZS5qcyIgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBjaGFyc2V0PSJ1dGYtOCI+PC9zY3JpcHQ+DQogIDxzY3JpcHQgc3JjPSIvL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9tb21lbnQuanMvMi4yLjEvbW9tZW50Lm1pbi5qcyIgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBjaGFyc2V0PSJ1dGYtOCI+PC9zY3JpcHQ+DQoNCiAgPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Ij4NCiAgICANCiAgICAvLyBTZXQgRW1wdHkgRmlsZQ0KDQogICAgdmFyIGVtcHR5RmlsZSA9IHsNCiAgICAgIGJvZHk6ICIiLA0KICAgICAgdHlwZTogInRleHQvcGxhaW4iLA0KICAgICAgX2lkOiAiIiwNCiAgICAgIF9kZWxldGVkOiBmYWxzZSwNCiAgICAgIGVkaXRvckxpbmU6IDAsDQogICAgICBlZGl0b3JMYXN0U2F2ZWQ6ICIiDQogICAgfTsNCiAgICB2YXIgZWRpdG9yOw0KICAgIA0KICAgIHZhciBnZXRTZXR0aW5ncyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIA0KICAgICAgdmFyIHNldHRpbmdzID0ge307DQogICAgICB2YXIgY3VycmVudFVybCA9ICQobG9jYXRpb24pLmF0dHIoJ2hyZWYnKTsNCiAgICAgIHZhciBwYXJ0c09mVXJsID0gZ2V0VVJMUGFydHMoKTsNCiAgICAgIA0KICAgICAgc2V0dGluZ3MuY3VycmVudFVybCA9IGN1cnJlbnRVcmw7DQogICAgICBzZXR0aW5ncy5zaXRlVXJsID0gcGFydHNPZlVybFsyXTsNCiAgICAgIHNldHRpbmdzLnVybEZpbGUgPSBwYXJ0c09mVXJsW3BhcnRzT2ZVcmwubGVuZ3RoIC0gMV07DQogICAgICANCiAgICAgIHNldHRpbmdzLm9uVmhvc3QgPSBpc1Zob3N0KCk7DQogICAgICBzZXR0aW5ncy5kYlBhdGggPSBpc1Zob3N0KCkgPyAiYXBpIiA6IHBhcnRzT2ZVcmxbM107DQogICAgICANCiAgICAgIHNldHRpbmdzLmVkaXRvclJld3JpdGUgPSAnX3Jld3JpdGUvY291Y2hpZGUvJzsNCiAgICAgIA0KICAgICAgcmV0dXJuIHNldHRpbmdzOw0KICAgIH0NCiAgDQogICAgdmFyIHNldHRpbmdzID0gZnVuY3Rpb24oKSB7DQogICAgICByZXR1cm4gZ2V0U2V0dGluZ3MoKTsNCiAgICB9DQogICAgDQogICAgdmFyIGlzVmhvc3QgPSBmdW5jdGlvbigpIHsNCiAgICAgIHJldHVybiBnZXRVUkxQYXJ0cygpLmluZGV4T2YoJ19yZXdyaXRlJykgPT09IC0xOw0KICAgIH0NCiAgICANCiAgICB2YXIgZ2V0VVJMUGFydHMgPSBmdW5jdGlvbigpIHsNCiAgICAgIHJldHVybiAkKGxvY2F0aW9uKS5hdHRyKCdocmVmJykuc3BsaXQoIi8iKTsNCiAgICB9DQogIA0KICAgIC8vIENvZGUgdG8gcGVyZm9ybSBvbiBkb2N1bWVudCByZWFkeQ0KICAgIA0KICAgICQoIGRvY3VtZW50ICkucmVhZHkoZnVuY3Rpb24oKSB7DQogICAgICAkKCcubW9kYWwnKS5oaWRlKCk7DQogICAgICAvKiAkKCdkaXYubmV3ZmlsZScpLmZhZGVJbigpOw0KICAgICAgICAgJCgnZGl2LnN0YXR1cycpDQogICAgICAgICAgIC5odG1sKCc8cCBjbGFzcz0iZW50eXBvLWF0dGVudGlvbiI+Tm8gZmlsZSBvcGVuITwvcD4nKQ0KICAgICAgICAgICAuZmFkZVRvKCAic2xvdyIgLCAwLjI0ICk7ICovDQogICAgICANCiAgICAgIA0KICAgICAgLy8gQ2xpY2sgaGFuZGxlcnMNCiAgICAgIA0KICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgInVsLmZpbGVzIGxpIGEiLCBmdW5jdGlvbigpIHsNCiAgICAgICAgdmFyIGxvYWQgPSAkKHRoaXMpLmRhdGEoJ2ZpbGUnKTsNCiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgY29uc29sZS5sb2coDQogICAgICAgICJjbGljazogIiArIGxvYWQNCiAgICAgICAgKTsNCiAgICAgICAgbG9hZEZpbGUobG9hZCk7DQogICAgICB9KTsNCiAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICJidXR0b24uc2F2ZSIsIGZ1bmN0aW9uKCkgew0KICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICBzYXZlRmlsZSgpOw0KICAgICAgfSk7DQogICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAiYnV0dG9uLmRlbGV0ZSIsIGZ1bmN0aW9uKCkgew0KICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAkKCdkaXYuZGVsZXRlJykuZmFkZUluKCdmYXN0Jyk7DQogICAgICB9KTsNCiAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICJkaXYuZGVsZXRlIGJ1dHRvbi55ZXMiLCBmdW5jdGlvbigpIHsNCiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgZGVsZXRlRmlsZSgpOw0KICAgICAgfSk7DQogICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAiYnV0dG9uLmNhbmNlbCIsIGZ1bmN0aW9uKCkgew0KICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICBmYWRlT3V0TW9kYWwoKQ0KICAgICAgfSk7DQogICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAiYnV0dG9uLm5ld2ZpbGUiLCBmdW5jdGlvbigpIHsNCiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgbmV3RmlsZSgpOw0KICAgICAgfSk7DQogICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAiYS5uZXdmaWxlIiwgZnVuY3Rpb24oKSB7DQogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICQoJ2Rpdi5uZXdmaWxlJykuZmFkZUluKCdmYXN0Jyk7DQogICAgICB9KTsNCiAgICAgIA0KICAgICAgLy8gTG9hZCBmaWxlcyBtZW51DQogICAgICANCiAgICAgIGdldEZpbGVzKCk7DQogICAgICANCiAgICAgIC8vIElmIGEgbmFtZSBpcyBlbnRlcmVkIGluIHRoZSBhZGRyZXNzYmFyIG9wZW4gdGhhdCBmaWxlDQogICAgICANCiAgICAgIGlmICggc2V0dGluZ3MoKS51cmxGaWxlICE9IGZhbHNlICkgew0KICAgICAgICBsb2FkRmlsZShzZXR0aW5ncygpLnVybEZpbGUpOw0KICAgICAgfSBlbHNlIGlmIChzZXR0aW5ncygpLnVybEZpbGUgPT0gJ2NvdWNoaWRlJykgew0KICAgICAgICBsb2FkRmlsZSgnaW5kZXguaHRtbCcpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbG9hZEZpbGUoJ2luZGV4Lmh0bWwnKTsNCiAgICAgIH0NCiAgICAgIA0KICAgIH0pOw0KICAgIA0KICAgIC8vIEZpbGUgbWFuaXB1bGF0aW9uIGZ1bmN0aW9ucw0KICAgIA0KICAgIGZ1bmN0aW9uIGdldEZpbGVzKCkgew0KICAgICAgcmV0dXJuICQuZ2V0SlNPTignLycgKyBzZXR0aW5ncygpLmRiUGF0aCArICcvX2Rlc2lnbi9pZGUvX3ZpZXcvdHlwZS1kb2MnLCANCiAgICAgICAgZnVuY3Rpb24oanNvbiwgdGV4dFN0YXR1cykgew0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGpzb24pOw0KICAgICAgICAgICQoJ3VsLmZpbGVzJykuaHRtbCgnJykNCiAgICAgICAgICAkLmVhY2goanNvbi5yb3dzLCBmdW5jdGlvbihpbmRleCwgdmFsKSB7DQogICAgDQogICAgICAgICAgICAvKiBpdGVyYXRlIHRocm91Z2ggYXJyYXkgb3Igb2JqZWN0ICovDQogICAgICAgICAgICAkKCd1bC5maWxlcycpDQogICAgICAgICAgICAuYXBwZW5kKA0KICAgICAgICAgICAgICAnPGxpPiA8YSBocmVmPSInDQogICAgICAgICAgICAgICsgdmFsLmlkDQogICAgICAgICAgICAgICsgJyIgZGF0YS1maWxlPSInDQogICAgICAgICAgICAgICsgdmFsLmlkDQogICAgICAgICAgICAgICsgJyI+Jw0KICAgICAgICAgICAgICArIHZhbC5pZA0KICAgICAgICAgICAgICArICc8L2E+PC9saT4nDQogICAgICAgICAgICApDQogICAgICAgICAgfQ0KICAgICAgICApOw0KICAgICAgfSk7DQogICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIGxvYWRGaWxlKGZpbGUpIHsNCiAgICAgIGZhZGVPdXRNb2RhbCgpDQogICAgICByZXR1cm4gJC5nZXRKU09OKCcvJyArIHNldHRpbmdzKCkuZGJQYXRoICsgJy8nICsgZmlsZSwgDQogICAgICAgIGZ1bmN0aW9uKGpzb24sIHRleHRTdGF0dXMpIHsNCiAgICAgICAgICBjdXJyZW50RmlsZSA9IHt9Ow0KICAgICAgICAgIGN1cnJlbnRGaWxlID0ganNvbjsNCiAgICAgICAgICBpbml0RWRpdG9yKCk7DQogICAgICAgICAgZ2V0RmlsZXMoKTsNCiAgICAgICAgICAkKCdkaXYuc3RhdHVzJykNCiAgICAgICAgICAgIC5odG1sKA0KICAgICAgICAgICAgICAnPHAgY2xhc3M9ImVudHlwby1jbG91ZCI+RmlsZSBsYXN0IHNhdmVkOiAnIA0KICAgICAgICAgICAgICArIG1vbWVudChjdXJyZW50RmlsZS5lZGl0b3JMYXN0U2F2ZWQpLmZyb21Ob3coKSANCiAgICAgICAgICAgICAgKyAnPC9wPicNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIC5mYWRlVG8oICdmYXN0JyAsIDAuMzMgKQ0KICAgICAgICAgICAgLmZhZGVUbyggJ3Nsb3cnICwgMC4yNCApOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoIHt9LCAnQ291Y2hJREU6ICcgKyBmaWxlICwgZmlsZSApOw0KICAgICAgICB9DQogICAgICApOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBzYXZlRmlsZSgpIHsNCiAgICAgIGlmIChjdXJyZW50RmlsZS5faWQgIT0gZmFsc2UpIHsNCiAgICAgICAgJCgnZGl2LnN0YXR1cycpDQogICAgICAgICAgLmh0bWwoJzxwIGNsYXNzPSJlbnR5cG8tdXBsb2FkLWNsb3VkIj5TYXZpbmc8L3A+JykNCiAgICAgICAgICAuZmFkZVRvKCAnZmFzdCcgLCAwLjUzICkuZGVsYXkoMjAwMCk7DQogICAgICAgIGN1cnJlbnRGaWxlLmJvZHkgPSBlZGl0b3IuZ2V0VmFsdWUoKTsNCiAgICAgICAgZWRpdG9yQ3Vyc29yID0gZWRpdG9yLnNlbGVjdGlvbi5nZXRDdXJzb3IoKTsNCiAgICAgICAgY3VycmVudEZpbGUuZWRpdG9yTGluZSA9IGVkaXRvckN1cnNvci5yb3c7DQogICAgICAgIGN1cnJlbnRGaWxlLmVkaXRvckxhc3RTYXZlZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOw0KICAgICAgICBjb25zb2xlLmxvZygNCiAgICAgICAgICAnc2F2ZTogJyArIGN1cnJlbnRGaWxlLl9pZA0KICAgICAgICApOw0KICAgICAgICAkLmFqYXgoew0KICAgICAgICAgIHR5cGU6ICdQT1NUJywNCiAgICAgICAgICB1cmw6ICcvJyArIHNldHRpbmdzKCkuZGJQYXRoICsgJy8nICsgc2V0dGluZ3MoKS51cmxGaWxlLA0KICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGN1cnJlbnRGaWxlKSwNCiAgICAgICAgICBjb250ZW50VHlwZSA6ICdhcHBsaWNhdGlvbi9qc29uJywNCiAgICAgICAgICBkYXRhVHlwZSA6ICdqc29uJywNCiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoIGRhdGEgKSB7DQogICAgICAgICAgICAkKCdkaXYuc3RhdHVzJykuaHRtbCgnU2F2ZWQnKTsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJTYXZlZCEiKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOw0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YS5fcmV2KTsNCiAgICAgICAgICAgIGxvYWRGaWxlKGN1cnJlbnRGaWxlLl9pZCk7DQogICAgICAgICAgfSwNCiAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAoIHJlc3BvbnNlICkgew0KICAgICAgICAgICAgYWxlcnQoJ0Vycm9yISBUaGUgbWVzc2FnZSB3YXMgbm90IHNlbnQuJyk7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgYWxlcnQoJ1BsZWFzZSBjcmVhdGUgYSBuZXcgZmlsZSBmaXJzdCcpOw0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBkZWxldGVGaWxlKCkgew0KICAgICAgY3VycmVudEZpbGUuX2RlbGV0ZWQgPSB0cnVlOw0KICAgICAgc2F2ZUZpbGUoKTsNCiAgICAgIGdldEZpbGVzKCk7DQogICAgICBjdXJyZW50RmlsZSA9IGVtcHR5RmlsZTsNCiAgICAgIGluaXRFZGl0b3IoKTsNCiAgICAgIGdldEZpbGVzKCk7DQogICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIG5ld0ZpbGUoKSB7DQogICAgICBmYWRlT3V0TW9kYWwoKQ0KICAgICAgY3VycmVudEZpbGUgPSBlbXB0eUZpbGU7DQogICAgICBjdXJyZW50RmlsZS5faWQgPSAkKCdpbnB1dC5maWVsZC5faWQnKS52YWwoKTsNCiAgICAgIGN1cnJlbnRGaWxlLnR5cGUgPSAkKCdzZWxlY3QuZmllbGQudHlwZScpLmZpbmQoIjpzZWxlY3RlZCIpLnZhbCgpOw0KICAgICAgDQogICAgICBpZiAoY3VycmVudEZpbGUudHlwZSA9PSAidGV4dC9odG1sIikgew0KICAgICAgICBjdXJyZW50RmlsZS5ib2R5ID0gJzwhZG9jdHlwZSBodG1sPlxyXG4gPGh0bWwgbGFuZz0iZW4iPlxyXG4gXHQ8aGVhZD5cclxuIFx0XHQ8bWV0YSBjaGFyc2V0PSJVVEYtOCI+XHJcbiBcdFx0PHRpdGxlPkRvY3VtZW50PC90aXRsZT5cclxuIFx0PC9oZWFkPlxyXG4gXHQ8Ym9keT5cclxuIFx0XHRcdFxyXG4gXHQ8L2JvZHk+XHJcbiA8L2h0bWw+XHJcbic7DQogICAgICAgIGN1cnJlbnRGaWxlLmVkaXRvckxpbmUgPSA3Ow0KICAgICAgfSBlbHNlIGlmIChjdXJyZW50RmlsZS50eXBlID09ICJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Iikgew0KICAgICAgICBjdXJyZW50RmlsZS5ib2R5ID0gJyc7DQogICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGaWxlLnR5cGUgPT0gInRleHQvY3NzIikgew0KICAgICAgICBjdXJyZW50RmlsZS5ib2R5ID0gJyc7DQogICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGaWxlLnR5cGUgPT0gInRleHQvcGxhaW4iKSB7DQogICAgICAgIGN1cnJlbnRGaWxlLmJvZHkgPSAnJzsNCiAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZpbGUudHlwZSA9PSAiYXBwbGljYXRpb24vanNvbiIpIHsNCiAgICAgICAgY3VycmVudEZpbGUuYm9keSA9ICd7XHJcblx0XHJcbn0nOw0KICAgICAgICBjdXJyZW50RmlsZS5lZGl0b3JMaW5lID0gMTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGN1cnJlbnRGaWxlLmJvZHkgPSAnJzsNCiAgICAgIH0NCiAgICAgIA0KICAgICAgaW5pdEVkaXRvcigpOw0KICAgICAgc2F2ZUZpbGUoKTsNCiAgICAgIGdldEZpbGVzKCk7DQogICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIGZhZGVPdXRNb2RhbCgpIHsNCiAgICAgICQoJy5tb2RhbCcpLmZhZGVPdXQoJ2Zhc3QnKTsNCiAgICB9DQogICAgDQogICAgLy8gSW5pdGlhbGlzYXRpb24gZnVuY3Rpb25zDQogICAgDQogICAgZnVuY3Rpb24gaW5pdEVkaXRvcigpIHsNCiAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRGaWxlKTsNCiAgICAgIGVkaXRvciA9IGFjZS5lZGl0KCJlZGl0b3IiKTsNCiAgICAgIGVkaXRvci5yZXNpemUoKQ0KICAgICAgZWRpdG9yLnNldFRoZW1lKCJhY2UvdGhlbWUvc29sYXJpemVkX2RhcmsiKTsNCiAgICAgIGlmIChjdXJyZW50RmlsZS50eXBlID09ICJ0ZXh0L2h0bWwiKSB7DQogICAgICAgIGVkaXRvci5nZXRTZXNzaW9uKCkuc2V0TW9kZSgiYWNlL21vZGUvaHRtbCIpOw0KICAgICAgICBjb25zb2xlLmxvZygiaHRtbCIpOw0KICAgICAgfSBlbHNlIGlmIChjdXJyZW50RmlsZS50eXBlID09ICJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Iikgew0KICAgICAgICBlZGl0b3IuZ2V0U2Vzc2lvbigpLnNldE1vZGUoImFjZS9tb2RlL2phdmFzY3JpcHQiKTsNCiAgICAgICAgY29uc29sZS5sb2coImphdmFzY3JpcHQiKTsNCiAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZpbGUudHlwZSA9PSAidGV4dC9jc3MiKSB7DQogICAgICAgIGVkaXRvci5nZXRTZXNzaW9uKCkuc2V0TW9kZSgiYWNlL21vZGUvY3NzIik7DQogICAgICAgIGNvbnNvbGUubG9nKCJjc3MiKTsNCiAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZpbGUudHlwZSA9PSAidGV4dC9wbGFpbiIpIHsNCiAgICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKCJhY2UvbW9kZS90ZXh0Iik7DQogICAgICAgIGNvbnNvbGUubG9nKCJwbGFpbnRleHQiKTsNCiAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZpbGUudHlwZSA9PSAiYXBwbGljYXRpb24vanNvbiIpIHsNCiAgICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKCJhY2UvbW9kZS9qc29uIik7DQogICAgICAgIGNvbnNvbGUubG9nKCJqc29uIik7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBlZGl0b3IuZ2V0U2Vzc2lvbigpLnNldE1vZGUoImFjZS9tb2RlL3BsYWluIik7DQogICAgICAgIGNvbnNvbGUubG9nKCJub3RoaW5nIik7DQogICAgICB9DQogICAgICBlZGl0b3Iuc2V0VmFsdWUoY3VycmVudEZpbGUuYm9keSk7DQogICAgICANCiAgICAgIGVkaXRvci5nZXRTZXNzaW9uKCkuc2V0VXNlU29mdFRhYnModHJ1ZSk7DQogICAgICBlZGl0b3IuZ2V0U2Vzc2lvbigpLnNldFRhYlNpemUoMik7DQogICAgICBlZGl0b3IuZ2V0U2Vzc2lvbigpLnNldFVzZVdyYXBNb2RlKHRydWUpOw0KICAgICAgDQogICAgICBlZGl0b3IuZ290b0xpbmUoY3VycmVudEZpbGUuZWRpdG9yTGluZSArIDEpOw0KICAgICAgJCgnaDIuZmlsZW5hbWUnKS5odG1sKGN1cnJlbnRGaWxlLl9pZCk7DQogICAgfQ0KICAgIA0KICA8L3NjcmlwdD4NCiAgICANCjwvYm9keT4NCjwvaHRtbD4="
    }
  }
}