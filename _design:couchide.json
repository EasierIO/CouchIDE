{
  "version": "0.4",
 "comment": "This is the CouchIDE design doc, when placed in a database it creates a sort of webserver for you.\nDocumentation at: https://github.com/vhv/CouchIDE",
 "_id": "_design/couchide",
 "views": {
 "type-doc": {
 "map": "function(doc) { emit(doc.type, doc) }"
 }
 },
 "rewrites": [
   {
     "from": "/couchide/",
     "to": "couch.ide"
   },
   {
     "from": "/couchide/*",
     "to": "couch.ide"
   },
   {
     "from": "/",
     "to": "_show/render/index.html"
   },
   {
     "from": "*/type-doc",
     "to": "_view/type-doc"
   },
   {
     "from": "/_session/",
     "to": "../../../_session/"
   },
   {
     "from": "/db/",
     "to": "../../"
   },
   {
     "from": "/db/*",
     "to": "../../*"
   },
   {
     "from": "/api/*",
     "to": "../../../*"
   },
   {
     "from": "/lib/*",
     "to": "../../../libraries/*"
   },
   {
     "from": "/*",
     "to": "_show/render/*"
   }
 ],
 "shows": {
   "render": "function(doc, req) { return { \"headers\": { \"Content-Type\": doc.type }, \"body\": doc.body } }"
  },
  "_attachments": {
    "couch.ide": {
      "content_type": "text/html",
      "data": "PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0idXRmLTgiPg0KICA8dGl0bGU+Q291Y2hJREU8L3RpdGxlPg0KICANCg0KICANCiAgPHN0eWxlPg0KICANCiAgICBAY2hhcnNldCAnVVRGLTgnOw0KICAgIEBmb250LWZhY2Ugew0KICAgICAgZm9udC1mYW1pbHk6ICdlbnR5cG8nOw0KICAgICAgZm9udC1zdHlsZTogJ25vcm1hbCc7DQogICAgICBmb250LXdlaWdodDogJ25vcm1hbCc7DQogICAgICBzcmM6IHVybCgnLi4vbGliL2VudHlwby9lbnR5cG8uZW90Jyk7DQogICAgICBzcmM6IHVybCgnLi4vbGliL2VudHlwby9lbnR5cG8uZW90PyNpZWZpeCcpIGZvcm1hdCgnZW90JyksIA0KICAgICAgdXJsKCcuLi9saWIvZW50eXBvL2VudHlwby53b2ZmJykgZm9ybWF0KCd3b2ZmJyksIA0KICAgICAgdXJsKCcuLi9saWIvZW50eXBvL2VudHlwby50dGYnKSBmb3JtYXQoJ3RydWV0eXBlJyksIA0KICAgICAgdXJsKCcuLi9saWIvZW50eXBvL2VudHlwby5zdmcjZW50eXBvJykgZm9ybWF0KCdzdmcnKTsNCiAgICB9DQogICAgDQogICAgaDEsIGgyLCBoMywgaDQgew0KICAgICAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgICAgIG1hcmdpbjogMDsNCiAgICB9DQogICAgDQogICAgYm9keSB7DQogICAgICBmb250LWZhbWlseTogIlNvdXJjZSBTYW5zIFBybyI7DQogICAgICBtYXJnaW46IDMwcHggMzIwcHggNDBweCAwOw0KICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgYmFja2dyb3VuZDogaHNsYSgwLDAlLDk1JSwxKTsNCiAgICAgIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkOw0KICAgICAgLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTsNCiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgfQ0KICAgIGEgew0KICAgICAgICBjb2xvcjogI2Q0MTQ1YTsNCiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KICAgIH0NCiAgICBpbnB1dCB7DQogICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgIH0NCiAgICB0ZXh0YXJlYSB7DQogICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgaGVpZ2h0OiBhdXRvOw0KICAgICAgZm9udC1zaXplOiAxNnB4Ow0KICAgIH0NCiAgICAuYm9keSB0ZXh0YXJlYSB7DQogICAgICBmb250LWZhbWlseTogIlNvdXJjZSBDb2RlIFBybyI7DQogICAgICBmb250LXNpemU6IDEzcHg7DQogICAgICBwYWRkaW5nOiAxZW07DQogICAgDQogICAgICBtaW4taGVpZ2h0OiA0MDBweDsNCiAgICB9DQogICAgDQogICAgc2VjdGlvbi5zaWRlYmFyIHsNCiAgICAgIGZvbnQtZmFtaWx5OiAiU291cmNlIFNhbnMgUHJvIjsNCiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICByaWdodDogMDsNCiAgICAgIHdpZHRoOiAzMDBweDsNCiAgICAgIGJvdHRvbTogMDsNCiAgICAgIHRvcDogNDBweDsNCiAgICAgIGJhY2tncm91bmQ6IGhzbGEoMCwwJSw5MCUsMSk7DQogICAgICBwYWRkaW5nOiAyMHB4Ow0KICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCBoc2xhKDAsMCUsNzAlLDEpOw0KICAgIH0NCiAgICAuc2lkZWJhciB1bCB7DQogICAgICBwYWRkaW5nOiAwOw0KICAgIH0NCiAgICAuc2lkZWJhciBsaSB7DQogICAgICBsaXN0LXN0eWxlOiBub25lOw0KICAgICAgcGFkZGluZzogMC41ZW0gMDsNCiAgICB9DQogICAgLnNpZGViYXIgbGk6YmVmb3JlIHsNCiAgICAgIGZvbnQtZmFtaWx5OiAnZW50eXBvJzsNCiAgICAgIGNvbnRlbnQ6ICJcMUY0QzQiOw0KICAgICAgbWFyZ2luLXJpZ2h0OiAwLjVlbTsNCiAgICAgIGZvbnQtc2l6ZToyZW07DQogICAgICBjb2xvcjogI2Q0MTQ1YTsNCiAgICB9DQogICAgLnNpZGViYXIgbGk6aG92ZXI6YmVmb3JlIHsNCiAgICAgIGNvbnRlbnQ6ICJcMjcwRSI7DQogICAgICBvcGFjaXR5OiAxOw0KICAgIH0NCiAgICBhLm5ld2ZpbGU6YmVmb3JlIHsNCiAgICAgIGZvbnQtZmFtaWx5OiAnZW50eXBvJzsNCiAgICAgIGZvbnQtc2l6ZToyZW07DQogICAgICBjb250ZW50OiAiXDIyOUUiOw0KICAgICAgbWFyZ2luLXJpZ2h0OiAwLjVlbTsNCiAgICAgIGNvbG9yOiAjZDQxNDVhOw0KICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOw0KICAgIH0NCiAgICANCiAgICAudG9wYmFyIHsNCiAgICAgIHBvc2l0aW9uOiBmaXhlZDsNCiAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAtbW96LWJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICB0b3A6IDA7DQogICAgICBsZWZ0OiAwOw0KICAgICAgcmlnaHQ6IDA7DQogICAgICBoZWlnaHQ6IDQwcHg7DQogICAgICBiYWNrZ3JvdW5kOiBoc2xhKDAsMCUsMjAlLDEpOw0KICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgcGFkZGluZzogMTFweDsNCiAgICB9DQogICAgaDEubG9nbyB7DQogICAgICBkaXNwbGF5OiBpbmxpbmU7DQogICAgICBwYWRkaW5nOiAwOw0KICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgbWFyZ2luOiAwOw0KICAgICAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgICB9DQogICAgaDEubG9nbyAubmluZSB7DQogICAgICBmb250LXdlaWdodDogOTAwICFpbXBvcnRhbnQ7DQogICAgfQ0KICAgIGgxLmxvZ28gLnR3byB7DQogICAgICBmb250LXdlaWdodDogMjAwICFpbXBvcnRhbnQ7DQogICAgfQ0KICAgIC50b3BiYXIgaDEgYTpsaW5rLCAudG9wYmFyIGgxIGE6dmlzaXRlZCB7DQogICAgICBjb2xvcjogd2hpdGU7DQogICAgfQ0KICAgIC50b3BiYXIgaDIuZmlsZW5hbWUgew0KICAgICAgZGlzcGxheTogaW5saW5lOw0KICAgICAgcGFkZGluZzogMDsNCiAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICAgIG1hcmdpbjogMDsNCiAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7DQogICAgICBtYXJnaW4tbGVmdDogMzBweDsNCiAgICB9DQogICAgLnRvcGJhciBoMi5maWxlbmFtZTpiZWZvcmUgew0KICAgICAgZm9udC1mYW1pbHk6ICdlbnR5cG8nOw0KICAgICAgY29udGVudDogIlwyNzBFIjsNCiAgICAgIGZvbnQtc2l6ZToyZW07DQogICAgICBtYXJnaW4tcmlnaHQ6IDAuNWVtOw0KICAgICAgbGluZS1oZWlnaHQ6IDAuMTsNCiAgICB9DQogICAgDQogICAgLm1vZGFsIHsNCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgIHdpZHRoOiA0MDBweDsNCiAgICAgIGxlZnQ6NTAlOw0KICAgICAgdG9wOiA1MCU7DQogICAgICBtYXJnaW4tbGVmdDotMjAwcHg7DQogICAgICBtYXJnaW4tdG9wOiAtMTAwcHg7DQogICAgICBiYWNrZ3JvdW5kOiAjZWVlOw0KICAgICAgei1pbmRleDogMTAwOw0KICAgICAgcGFkZGluZzogNDBweDsNCiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgIGJvcmRlci1yYWRpdXM6IDJweDsNCiAgICAgIGJveC1zaGFkb3c6IDBweCAwcHggMTBweCBoc2xhKDAsMCUsMCUsMC4zKTsNCiAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGhzbGEoMCwwJSw3MCUsMSk7DQogICAgICBkaXNwbGF5OiBub25lOw0KICAgIH0NCiAgICANCiAgICAubm90bG9hZGVkIHsNCiAgICAgIHBhZGRpbmc6IDRlbTsNCiAgICB9DQogICAgDQogICAgLmVkaXQgew0KICAgICAgcGFkZGluZzogMjBweDsNCiAgICAgIHotaW5kZXg6IC0xMDA7DQogICAgfQ0KICAgIA0KICAgIC5ib3R0b21iYXIgew0KICAgICAgZm9udC1mYW1pbHk6ICJTb3VyY2UgU2FucyBQcm8iOw0KICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgYm90dG9tOiAwOw0KICAgICAgbGVmdDogMDsNCiAgICAgIHJpZ2h0OiAzMDBweDsNCiAgICAgIGJhY2tncm91bmQ6IGhzbGEoMCwwJSw5NSUsMSk7DQogICAgICBib3JkZXItdG9wOiAxcHggc29saWQgaHNsYSgwLDAlLDcwJSwxKTsNCiAgICAgIG1hcmdpbjogMDsNCiAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICBoZWlnaHQ6IDQwcHg7DQogICAgfQ0KICAgIA0KICAgIGJ1dHRvbiB7DQogICAgICBkaXNwbGF5OiBpbmxpbmU7DQogICAgICBib3JkZXI6IDFweCBzb2xpZCBoc2xhKDAsMCUsNzAlLDEpOw0KICAgICAgYm9yZGVyLXJhZGl1czogM3B4Ow0KICAgICAgYmFja2dyb3VuZDogaHNsYSgwLDAlLDEwMCUsMCk7DQogICAgICBmb250LWZhbWlseTogIlNvdXJjZSBTYW5zIFBybyI7DQogICAgICBmb250LXdlaWdodDogNDAwOw0KICAgICAgZm9udC1zaXplOiAxZW07DQogICAgICBtaW4td2lkdGg6IDEwMHB4Ow0KICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgIHBhZGRpbmc6IDdweCAyMHB4IDdweCAxMHB4Ow0KICAgIH0NCiAgICBidXR0b246aG92ZXIgew0KICAgICAgYmFja2dyb3VuZDogaHNsYSgwLDAlLDEwMCUsMC43KTsNCiAgICB9DQogICAgZGl2LnNhdmUgew0KICAgICAgZmxvYXQ6IHJpZ2h0Ow0KICAgICAgcGFkZGluZzogMHB4Ow0KICAgIH0NCiAgICBidXR0b24uc2F2ZSB7DQogICAgICBjb2xvcjogaHNsYSgxNDgsMTAwJSwyOCUsMSk7DQogICAgICBmb250LXdlaWdodDogNjAwOw0KICAgIH0NCiAgICBidXR0b24uZGVsZXRlIHsNCiAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7DQogICAgfQ0KICAgIA0KICAgIC5kZWxldGUgYnV0dG9uLnllcyB7DQogICAgICBjb2xvcjogaHNsYSgzNTUsODQlLDQwJSwxKQ0KICAgIH0NCiAgICBkaXYuZGVsZXRlZCB7DQogICAgICBmbG9hdDogbGVmdDsNCiAgICAgIHBhZGRpbmc6IDBweDsNCiAgICB9DQogICAgZGl2LnN0YXR1cyB7DQogICAgICBjb2xvcjogaHNsYSgwLDAlLDAlLDEpOw0KICAgICAgZmxvYXQ6IHJpZ2h0Ow0KICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICBwYWRkaW5nOiAxMHB4IDEwcHggMjBweCAxMHB4Ow0KICAgIH0NCiAgICBkaXYuc3RhdHVzIHAgew0KICAgICAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgICAgIG1hcmdpbjogMDsNCiAgICAgIHBhZGRpbmc6IDA7DQogICAgfQ0KICAgIA0KICAgIC5zdGF0dXMgLmZpbGUtbGFzdC1zYXZlZDpiZWZvcmUsIC5zdGF0dXMgLnNhdmluZzpiZWZvcmUsIC5zdGF0dXMgLmVkaXRvci1ub3QtbG9hZGluZzpiZWZvcmUsIC5kZWxldGUgYnV0dG9uLnllczpiZWZvcmUsIC5ib3R0b21iYXIgYnV0dG9uLnNhdmU6YmVmb3JlLCAuYm90dG9tYmFyIGJ1dHRvbi5kZWxldGU6YmVmb3JlLCBhLm5ld2ZpbGU6YmVmb3JlLCBidXR0b24uZGVsZXRlOmJlZm9yZSB7DQogICAgICBmb250LXNpemU6MmVtOw0KICAgICAgZm9udC1mYW1pbHk6ZW50eXBvOw0KICAgICAgbWFyZ2luLXJpZ2h0OiAwLjVlbTsNCiAgICAgIGxpbmUtaGVpZ2h0OjAuNzsNCiAgICAgIGZsb2F0OiBsZWZ0Ow0KICAgIH0NCiAgICANCiAgICBidXR0b24uZGVsZXRlOmJlZm9yZSB7Y29udGVudDoiXDI3MTYifQ0KICAgIA0KICAgIC5zdGF0dXMgLmZpbGUtbGFzdC1zYXZlZDpiZWZvcmUge2NvbnRlbnQ6IlwyNjAxIjt9DQogICAgLnN0YXR1cyAuc2F2aW5nOmJlZm9yZSB7Y29udGVudDoiXGU3MTEiO30NCiAgICAuc3RhdHVzIC5lZGl0b3Itbm90LWxvYWRpbmc6YmVmb3Jle2NvbnRlbnQ6IlwyMzJiIjt9DQogICAgDQogICAgLmJvdHRvbWJhciBidXR0b24uc2F2ZTpiZWZvcmV7Y29udGVudDoiXDI3MTMiO30NCiAgICAuYm90dG9tYmFyIGJ1dHRvbi5kZWxldGU6YmVmb3Jle2NvbnRlbnQ6IlwyNzE2Ijt9DQogICAgDQogICAgYS5uZXdmaWxlOmJlZm9yZXtjb250ZW50OiJcMjc5NSI7fQ0KICAgIA0KICAgIFtjb250ZW50ZWRpdGFibGVdLCB0ZXh0YXJlYSwgaW5wdXQgew0KICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgIGJvcmRlcjogMnB4IHNvbGlkIGhzbGEoMzM0LDg1JSw1MiUsMC4xKTsNCiAgICAgIC8qbWFyZ2luOiAtNXB4IC01cHggLTVweCAtNXB4OyovDQogICAgICBtYXJnaW4tdG9wOiAtNXB4Ow0KICAgICAgbWFyZ2luLXJpZ2h0OiAtNXB4Ow0KICAgICAgbWFyZ2luLWxlZnQ6IC01cHg7DQogICAgICBwYWRkaW5nOiA1cHg7DQogICAgICBvdXRsaW5lOiBub25lOw0KICAgIH0NCiAgICANCiAgICBbY29udGVudGVkaXRhYmxlXTpob3ZlciwgdGV4dGFyZWE6aG92ZXIsIGlucHV0OmhvdmVyIHsNCiAgICAgIGJvcmRlcjogMnB4IHNvbGlkIGhzbGEoMzM0LDg1JSw1MiUsMC41KTsNCiAgICAgIG91dGxpbmU6IG5vbmU7DQogICAgfQ0KICAgIA0KICAgIFtjb250ZW50ZWRpdGFibGVdOmZvY3VzLCB0ZXh0YXJlYTpmb2N1cywgaW5wdXQ6Zm9jdXMgew0KICAgICAgYm9yZGVyOiAycHggc29saWQgaHNsYSgzMzQsODUlLDUyJSwxKTsNCiAgICAgIG91dGxpbmU6IG5vbmU7DQogICAgfQ0KICAgIA0KICAgIHNlY3Rpb24uZWRpdG9yIHsNCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgIGxlZnQ6IDA7DQogICAgICB0b3A6IDQwcHg7DQogICAgICBib3R0b206IDYxcHg7DQogICAgICByaWdodDogMjgwcHg7DQogICAgICB6LWluZGV4OiAtMTAwOw0KICAgIH0NCiAgICAjZWRpdG9yIHsgDQogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICBsZWZ0OiAwOw0KICAgICAgdG9wOiAwOw0KICAgICAgYm90dG9tOiAwOw0KICAgICAgcmlnaHQ6IDA7DQogICAgfQ0KICAgIA0KICAgIC5hY2VfdGV4dC1sYXllciB7DQogICAgICBjb2xvcjogaW5oZXJpdCAhaW1wb3J0YW50Ow0KICAgIH0NCiAgICANCiAgICBAbWVkaWEgKG1heC13aWR0aDogNjAwcHgpIHsNCiAgICAgIGJvZHksIC5tb2RhbCwgLnRvcGJhciwgc2VjdGlvbi5zaWRlYmFyLCBzZWN0aW9uLmVkaXRvciwgLmJvdHRvbWJhciB7DQogICAgICAgIGRpc3BsYXk6IGJsb2NrOw0KICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7DQogICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7DQogICAgICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgd2lkdGg6IDEwMCU7DQogICAgICAgIGhlaWdodDogYXV0bzsNCiAgICAgICAgbWFyZ2luOiAwOw0KICAgICAgICBsZWZ0OiAwOw0KICAgICAgICB0b3A6IDA7DQogICAgICAgIGJvdHRvbTogMDsNCiAgICAgICAgcmlnaHQ6IDA7DQogICAgICB9DQogICAgICBzZWN0aW9uLmVkaXRvciB7DQogICAgICAgIHotaW5kZXg6IDEwMDsNCiAgICAgICAgbWluLWhlaWdodDogMTAwMDAwcHg7DQogICAgICB9DQogICAgICAuYm90dG9tYmFyIGRpdiB7DQogICAgICB9DQogICAgICAuYm90dG9tYmFyIGJ1dHRvbiB7DQogICAgICAgIHBhZGRpbmctcmlnaHQ6IDRweDsNCiAgICAgICAgcGFkZGluZy1sZWZ0OiA0cHg7DQogICAgICAgIG1pbi13aWR0aDogMDsNCiAgICAgICAgaGVpZ2h0OiA0MHB4Ow0KICAgICAgICBtYXJnaW46MDsNCiAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgfQ0KICAgICAgLmJvdHRvbWJhciAuc3RhdHVzIHsNCiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgfQ0KICAgICAgLmJvdHRvbWJhciB7DQogICAgICAgIHBvc2l0aW9uOiBmaXhlZDsNCiAgICAgICAgei1pbmRleDogMTAwMDsNCiAgICAgICAgbGVmdDogMDsNCiAgICAgICAgYm90dG9tOiAwOw0KICAgICAgICByaWdodDogMDsNCiAgICAgICAgbWF4LWhlaWdodDogNDBweDsNCiAgICAgICAgYmFja2dyb3VuZDogOw0KICAgICAgICBiYWNrZ3JvdW5kOiBoc2xhKDAsMCUsOTUlLDEpOw0KICAgICAgICBvdmVyZmxvdzogaGlkZGVuOw0KICAgICAgICBwYWRkaW5nOiAwOw0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgPC9zdHlsZT4NCiAgDQogIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJpbml0aWFsLXNjYWxlPTEiPg0KDQo8L2hlYWQ+DQo8Ym9keT4NCiAgPHNlY3Rpb24gY2xhc3M9InRvcGJhciI+DQogICAgPGgxIGNsYXNzPSJsb2dvIj48c3BhbiBjbGFzcz0ibmluZSI+Q09VQ0g8L3NwYW4+PHNwYW4gY2xhc3M9InR3byI+SURFPC9zcGFuPiAwLjQ8L2gxPg0KICAgIDxoMiBjbGFzcz0iZmlsZW5hbWUiPkJhbSEgV2Vic2VydmVyLjwvaDI+DQogIDwvc2VjdGlvbj4NCiAgICAgIA0KICA8ZGl2IGNsYXNzPSJtb2RhbCBuZXdmaWxlIj4NCiAgICA8cD5XaGF0IG5hbWUgc2hvdWxkIHlvdXIgZmlsZSBoYXZlPzwvcD4NCiAgICA8aW5wdXQgbmFtZT0iX2lkIiBjbGFzcz0iZmllbGQgX2lkIiBwbGFjZWhvbGRlcj0iRmlsZW5hbWUiPg0KICAgIDxzZWxlY3QgY2xhc3M9ImZpZWxkIHR5cGUiPg0KICAgICAgPG9wdGlvbiB2YWx1ZT0idGV4dC9wbGFpbiI+UGxhaW4gdGV4dDwvb3B0aW9uPg0KICAgICAgPG9wdGlvbiB2YWx1ZT0idGV4dC9odG1sIj5IVE1MPC9vcHRpb24+DQogICAgICA8b3B0aW9uIHZhbHVlPSJ0ZXh0L2NzcyI+Q1NTPC9vcHRpb24+DQogICAgICA8b3B0aW9uIHZhbHVlPSJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Ij5KYXZhc2NyaXB0PC9vcHRpb24+DQogICAgICA8b3B0aW9uIHZhbHVlPSJhcHBsaWNhdGlvbi9qc29uIj5KU09OPC9vcHRpb24+DQogICAgICA8b3B0aW9uIHZhbHVlPSJ0ZXh0L3gtbWFya2Rvd24iPk1hcmtkb3duPC9vcHRpb24+DQogICAgICA8b3B0aW9uIHZhbHVlPSJ0ZXh0L3gtaGFuZGxlYmFycy10ZW1wbGF0ZSI+SGFuZGxlYmFyczwvb3B0aW9uPg0KICAgIDwvc2VsZWN0Pg0KICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibmV3ZmlsZSI+Q3JlYXRlIGZpbGU8L2J1dHRvbj4NCiAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImNhbmNlbCI+Tm8sIENhbmNlbDwvYnV0dG9uPg0KICA8L2Rpdj4gICAgDQogIA0KICA8ZGl2IGNsYXNzPSJtb2RhbCBkZWxldGUiPg0KICAgIDxwPkFyZSB5b3Ugc3VyZSB5b3Ugd2lzaCB0byBkZWxldGUgdGhpcyBmaWxlPzwvcD4NCiAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InllcyI+WWVzLCBEZWxldGU8L2J1dHRvbj4NCiAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImNhbmNlbCI+Tm8sIENhbmNlbDwvYnV0dG9uPg0KICA8L2Rpdj4gICAgDQoNCiAgPHNlY3Rpb24gY2xhc3M9InNpZGViYXIiPg0KICAgIDxoMj5GaWxlczo8L2gyPg0KICAgIDx1bCBjbGFzcz0iZmlsZXMiPg0KICAgICAgPGxpPk5vIGZpbGVzIHlldCE8L2xpPg0KICAgIDwvdWw+DQogICAgPGEgaHJlZj0iIy9uZXciIGNsYXNzPSJuZXdmaWxlIj5OZXcgZmlsZTwvYT4NCiAgPC9zZWN0aW9uPg0KICANCiAgPHNlY3Rpb24gY2xhc3M9ImJvdHRvbWJhciI+DQogICAgPGRpdiBjbGFzcz0ic2F2ZSI+DQogICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0ic2F2ZSI+U2F2ZTwvYnV0dG9uPg0KICAgIDwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9InN0YXR1cyI+PHAgY2xhc3M9ImFsZXJ0IGVkaXRvci1ub3QtbG9hZGVkIj5FZGl0b3Igbm90IGxvYWRlZCB5ZXQhPC9wPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9ImRlbGV0ZSI+DQogICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImRlbGV0ZSI+RGVsZXRlPC9idXR0b24+DQogICAgPC9kaXY+DQogIDwvc2VjdGlvbj4NCg0KICA8c2VjdGlvbiBjbGFzcz0iZWRpdG9yIj48ZGl2IGlkPSJlZGl0b3IiPjxzZWN0aW9uIGNsYXNzPSJub3Rsb2FkZWQiPlBsZWFzZSBvcGVuIGEgZmlsZSBvciA8YSBocmVmPSIjL25ldyIgY2xhc3M9Im5ld2ZpbGUiPmNyZWF0ZSBhIG5ldyBmaWxlPC9hPiBhbmQgc3RhcnQgZWRpdGluZyEgSWYgbm8gZmlsZSBpcyBzcGVjaWZpZWQgdGhlIHJld3JpdGUgd2lsbCB0cnkgdG8gbG9hZCAnaW5kZXguaHRtbCcgSWYgeW91IG5lZWQgYW55IG1vcmUgaGVscCBpdCBjYW4gYmUgZm91bmQgb24gPGEgaHJlZj0iaHR0cHM6Ly9naXRodWIuY29tL3Zodi9Db3VjaElERSI+R2l0SHViPC9hPi48L3NlY3Rpb24+PC9kaXY+PC9zZWN0aW9uPg0KICANCiAgPHNjcmlwdCBzcmM9Ii4uL2xpYi9qcXVlcnkvanF1ZXJ5LmpzIiB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIGNoYXJzZXQ9InV0Zi04Ij48L3NjcmlwdD4NCiAgPHNjcmlwdCBzcmM9Ii4uL2xpYi9hY2UvYWNlLmpzIiB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIGNoYXJzZXQ9InV0Zi04Ij48L3NjcmlwdD4NCiAgPCEtLWh0dHA6Ly9zZXJ2ZXIuZWFzaWVyLmlvL2xpYnJhcmllcy9wb3VjaGRiLW1pbi9wb3VjaGRiLmpzLS0+DQogIDxzY3JpcHQgc3JjPSIuLi9saWIvbW9tZW50L21vbWVudC5qcyIgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBjaGFyc2V0PSJ1dGYtOCI+PC9zY3JpcHQ+DQoNCiAgPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Ij4NCiAgICANCiAgICAvLyBTZXQgRW1wdHkgRmlsZQ0KDQogICAgdmFyIGVtcHR5RmlsZSA9IHsNCiAgICAgIGJvZHk6ICIiLA0KICAgICAgdHlwZTogInRleHQvcGxhaW4iLA0KICAgICAgX2lkOiAiIiwNCiAgICAgIF9kZWxldGVkOiBmYWxzZSwNCiAgICAgIGVkaXRvckxpbmU6IDAsDQogICAgICBlZGl0b3JMYXN0U2F2ZWQ6ICIiDQogICAgfTsNCiAgICB2YXIgZWRpdG9yOw0KICAgIA0KICAgIHZhciBnZXRTZXR0aW5ncyA9IGZ1bmN0aW9uICgpIHsNCiAgICAgIA0KICAgICAgdmFyIHNldHRpbmdzID0ge307DQogICAgICB2YXIgY3VycmVudFVybCA9ICQobG9jYXRpb24pLmF0dHIoJ2hyZWYnKTsNCiAgICAgIHZhciBwYXJ0c09mVXJsID0gZ2V0VVJMUGFydHMoKTsNCiAgICAgIA0KICAgICAgc2V0dGluZ3MuY3VycmVudFVybCA9IGN1cnJlbnRVcmw7DQogICAgICBzZXR0aW5ncy5zaXRlVXJsID0gcGFydHNPZlVybFsyXTsNCiAgICAgIHNldHRpbmdzLnVybEZpbGUgPSBwYXJ0c09mVXJsW3BhcnRzT2ZVcmwubGVuZ3RoIC0gMV07DQogICAgICANCiAgICAgIHNldHRpbmdzLm9uVmhvc3QgPSBpc1Zob3N0KCk7DQogICAgICBzZXR0aW5ncy5kYlBhdGggPSBpc1Zob3N0KCkgPyAiZGIiIDogcGFydHNPZlVybFszXTsNCiAgICAgIA0KICAgICAgc2V0dGluZ3MuZWRpdG9yUmV3cml0ZSA9ICdfcmV3cml0ZS9jb3VjaGlkZS8nOw0KICAgICAgDQogICAgICByZXR1cm4gc2V0dGluZ3M7DQogICAgfQ0KICANCiAgICB2YXIgc2V0dGluZ3MgPSBmdW5jdGlvbigpIHsNCiAgICAgIHJldHVybiBnZXRTZXR0aW5ncygpOw0KICAgIH0NCiAgICANCiAgICB2YXIgaXNWaG9zdCA9IGZ1bmN0aW9uKCkgew0KICAgICAgcmV0dXJuIGdldFVSTFBhcnRzKCkuaW5kZXhPZignX3Jld3JpdGUnKSA9PT0gLTE7DQogICAgfQ0KICAgIA0KICAgIHZhciBnZXRVUkxQYXJ0cyA9IGZ1bmN0aW9uKCkgew0KICAgICAgcmV0dXJuICQobG9jYXRpb24pLmF0dHIoJ2hyZWYnKS5zcGxpdCgiLyIpOw0KICAgIH0NCiAgDQogICAgLy8gQ29kZSB0byBwZXJmb3JtIG9uIGRvY3VtZW50IHJlYWR5DQogICAgDQogICAgJCggZG9jdW1lbnQgKS5yZWFkeShmdW5jdGlvbigpIHsNCiAgICAgICQoJy5tb2RhbCcpLmhpZGUoKTsNCiAgICAgIA0KICAgICAgLy8gQ2xpY2sgaGFuZGxlcnMNCiAgICAgIA0KICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgInVsLmZpbGVzIGxpIGEiLCBmdW5jdGlvbigpIHsNCiAgICAgICAgdmFyIGxvYWQgPSAkKHRoaXMpLmRhdGEoJ2ZpbGUnKTsNCiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgY29uc29sZS5sb2coDQogICAgICAgICJjbGljazogIiArIGxvYWQNCiAgICAgICAgKTsNCiAgICAgICAgbG9hZEZpbGUobG9hZCk7DQogICAgICB9KTsNCiAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICJidXR0b24uc2F2ZSIsIGZ1bmN0aW9uKCkgew0KICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICBzYXZlRmlsZSgpOw0KICAgICAgfSk7DQogICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAiYnV0dG9uLmRlbGV0ZSIsIGZ1bmN0aW9uKCkgew0KICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAkKCdzZWN0aW9uLmVkaXRvcicpLmNzcyggJy13ZWJraXQtZmlsdGVyJywgJ2JsdXIoMC4ycHgpIGdyYXlzY2FsZSgwLjUpJyApOw0KICAgICAgICAkKCdkaXYuZGVsZXRlJykuZmFkZUluKCdmYXN0Jyk7DQogICAgICB9KTsNCiAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICJkaXYuZGVsZXRlIGJ1dHRvbi55ZXMiLCBmdW5jdGlvbigpIHsNCiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgZGVsZXRlRmlsZSgpOw0KICAgICAgfSk7DQogICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAiYnV0dG9uLmNhbmNlbCIsIGZ1bmN0aW9uKCkgew0KICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICBmYWRlT3V0TW9kYWwoKQ0KICAgICAgfSk7DQogICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAiYnV0dG9uLm5ld2ZpbGUiLCBmdW5jdGlvbigpIHsNCiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgbmV3RmlsZSgpOw0KICAgICAgfSk7DQogICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAiYS5uZXdmaWxlIiwgZnVuY3Rpb24oKSB7DQogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICQoJ3NlY3Rpb24uZWRpdG9yJykuY3NzKCctd2Via2l0LWZpbHRlcicsICdibHVyKDAuMnB4KSBncmF5c2NhbGUoMC41KScpOw0KICAgICAgICAkKCdkaXYubmV3ZmlsZScpLmZhZGVJbignZmFzdCcpOw0KICAgICAgfSk7DQogICAgICANCiAgICAgIC8vIExvYWQgZmlsZXMgbWVudQ0KICAgICAgDQogICAgICBnZXRGaWxlcygpOw0KICAgICAgDQogICAgICAvLyBJZiBhIG5hbWUgaXMgZW50ZXJlZCBpbiB0aGUgYWRkcmVzc2JhciBvcGVuIHRoYXQgZmlsZQ0KICAgICAgDQogICAgICBpZiAoIHNldHRpbmdzKCkudXJsRmlsZSAhPSBmYWxzZSApIHsNCiAgICAgICAgbG9hZEZpbGUoc2V0dGluZ3MoKS51cmxGaWxlKTsNCiAgICAgIH0gZWxzZSBpZiAoc2V0dGluZ3MoKS51cmxGaWxlID09ICdjb3VjaGlkZScpIHsNCiAgICAgICAgbG9hZEZpbGUoJ2luZGV4Lmh0bWwnKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxvYWRGaWxlKCdpbmRleC5odG1sJyk7DQogICAgICB9DQogICAgICANCiAgICB9KTsNCiAgICANCiAgICAvLyBGaWxlIG1hbmlwdWxhdGlvbiBmdW5jdGlvbnMNCiAgICANCiAgICBmdW5jdGlvbiBnZXRGaWxlcygpIHsNCiAgICAgIHJldHVybiAkLmdldEpTT04oJy8nKyBzZXR0aW5ncygpLmRiUGF0aCArICAnL19kZXNpZ24vY291Y2hpZGUvX3ZpZXcvdHlwZS1kb2MnLA0KICAgICAgICBmdW5jdGlvbihqc29uLCB0ZXh0U3RhdHVzKSB7DQogICAgICAgICAgLy8gY29uc29sZS5sb2coanNvbik7DQogICAgICAgICAgJCgndWwuZmlsZXMnKS5odG1sKCcnKQ0KICAgICAgICAgICQuZWFjaChqc29uLnJvd3MsIGZ1bmN0aW9uKGluZGV4LCB2YWwpIHsNCiAgICANCiAgICAgICAgICAgIC8qIGl0ZXJhdGUgdGhyb3VnaCBhcnJheSBvciBvYmplY3QgKi8NCiAgICAgICAgICAgICQoJ3VsLmZpbGVzJykNCiAgICAgICAgICAgIC5hcHBlbmQoDQogICAgICAgICAgICAgICc8bGk+IDxhIGhyZWY9IicNCiAgICAgICAgICAgICAgKyB2YWwuaWQNCiAgICAgICAgICAgICAgKyAnIiBkYXRhLWZpbGU9IicNCiAgICAgICAgICAgICAgKyB2YWwuaWQNCiAgICAgICAgICAgICAgKyAnIj4nDQogICAgICAgICAgICAgICsgdmFsLmlkDQogICAgICAgICAgICAgICsgJzwvYT48L2xpPicNCiAgICAgICAgICAgICkNCiAgICAgICAgICB9DQogICAgICAgICk7DQogICAgICB9KTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gbG9hZEZpbGUoZmlsZSkgew0KICAgICAgZmFkZU91dE1vZGFsKCk7DQogICAgICByZXR1cm4gJC5nZXRKU09OKCcvJyArIHNldHRpbmdzKCkuZGJQYXRoICsgJy8nICsgZmlsZSwgDQogICAgICAgIGZ1bmN0aW9uKGpzb24sIHRleHRTdGF0dXMpIHsNCiAgICAgICAgICBjdXJyZW50RmlsZSA9IHt9Ow0KICAgICAgICAgIGN1cnJlbnRGaWxlID0ganNvbjsNCiAgICAgICAgICBpbml0RWRpdG9yKCk7DQogICAgICAgICAgZ2V0RmlsZXMoKTsNCiAgICAgICAgICAkKCdkaXYuc3RhdHVzJykNCiAgICAgICAgICAgIC5odG1sKA0KICAgICAgICAgICAgICAnPHAgY2xhc3M9ImZpbGUtbGFzdC1zYXZlZCI+RmlsZSBsYXN0IHNhdmVkOiAnIA0KICAgICAgICAgICAgICArIG1vbWVudChjdXJyZW50RmlsZS5lZGl0b3JMYXN0U2F2ZWQpLmZyb21Ob3coKSANCiAgICAgICAgICAgICAgKyAnPC9wPicNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIC5mYWRlVG8oICdmYXN0JyAsIDAuMzMgKQ0KICAgICAgICAgICAgLmZhZGVUbyggJ3Nsb3cnICwgMC4yNCApOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoIHt9LCAnQ291Y2hJREU6ICcgKyBmaWxlICwgZmlsZSApOw0KICAgICAgICB9DQogICAgICApOw0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBzYXZlRmlsZSgpIHsNCiAgICAgIGlmIChjdXJyZW50RmlsZS5faWQgIT0gZmFsc2UpIHsNCiAgICAgICAgJCgnZGl2LnN0YXR1cycpDQogICAgICAgICAgLmh0bWwoJzxwIGNsYXNzPSJzYXZpbmciPlNhdmluZzwvcD4nKQ0KICAgICAgICAgIC5mYWRlVG8oICdmYXN0JyAsIDAuNTMgKS5kZWxheSgyMDAwKTsNCiAgICAgICAgY3VycmVudEZpbGUuYm9keSA9IGVkaXRvci5nZXRWYWx1ZSgpOw0KICAgICAgICBlZGl0b3JDdXJzb3IgPSBlZGl0b3Iuc2VsZWN0aW9uLmdldEN1cnNvcigpOw0KICAgICAgICBjdXJyZW50RmlsZS5lZGl0b3JMaW5lID0gZWRpdG9yQ3Vyc29yLnJvdzsNCiAgICAgICAgY3VycmVudEZpbGUuZWRpdG9yTGFzdFNhdmVkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7DQogICAgICAgIGNvbnNvbGUubG9nKA0KICAgICAgICAgICdzYXZlOiAnICsgY3VycmVudEZpbGUuX2lkDQogICAgICAgICk7DQogICAgICAgICQuYWpheCh7DQogICAgICAgICAgdHlwZTogJ1BPU1QnLA0KICAgICAgICAgIHVybDogJy8nICsgc2V0dGluZ3MoKS5kYlBhdGggKyAnLycsDQogICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoY3VycmVudEZpbGUpLA0KICAgICAgICAgIGNvbnRlbnRUeXBlIDogJ2FwcGxpY2F0aW9uL2pzb24nLA0KICAgICAgICAgIGRhdGFUeXBlIDogJ2pzb24nLA0KICAgICAgICAgIHN0YXR1c0NvZGU6IHsNCiAgICAgICAgICAgIDQwOTogZnVuY3Rpb24oZGF0YSkgew0KICAgICAgICAgICAgICBhbGVydCgnRG9jdW1lbnQgdXBkYXRlIGNvbmZsaWN0ISBUaGUgZmlsZSBoYXMgcHJvYmFibHkgYWxzbyBiZWVuIGVkaXRlZCBzb21ld2hlcmUgZWxzZSEnKTsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coIjQwOSEgIiArIEpTT04uc3RyaW5naWZ5KGRhdGEpICk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgNDA0OiBmdW5jdGlvbihkYXRhKSB7DQogICAgICAgICAgICAgIGFsZXJ0KCdGaWxlIG5vdCBmb3VuZCEnKTsNCiAgICAgICAgICAgICAgY29uc29sZS5sb2coIjQwNCEgIiArIEpTT04uc3RyaW5naWZ5KGRhdGEpKTsNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAyMDE6IGZ1bmN0aW9uKGRhdGEpIHsNCiAgICAgICAgICAgICAgJCgnZGl2LnN0YXR1cycpLmh0bWwoJ1NhdmVkJyk7DQogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTYXZlZCEgIiArIEpTT04uc3RyaW5naWZ5KGRhdGEpKTsNCiAgICAgICAgICAgICAgbG9hZEZpbGUoY3VycmVudEZpbGUuX2lkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgYWxlcnQoJ1BsZWFzZSBjcmVhdGUgYSBuZXcgZmlsZSBmaXJzdCcpOw0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBkZWxldGVGaWxlKCkgew0KICAgICAgY3VycmVudEZpbGUuX2RlbGV0ZWQgPSB0cnVlOw0KICAgICAgc2F2ZUZpbGUoKTsNCiAgICAgIGdldEZpbGVzKCk7DQogICAgICBjdXJyZW50RmlsZSA9IGVtcHR5RmlsZTsNCiAgICAgIGluaXRFZGl0b3IoKTsNCiAgICAgIGdldEZpbGVzKCk7DQogICAgICBmYWRlT3V0TW9kYWwoKTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gbmV3RmlsZSgpIHsNCiAgICAgIGZhZGVPdXRNb2RhbCgpDQogICAgICBjdXJyZW50RmlsZSA9IGVtcHR5RmlsZTsNCiAgICAgIGN1cnJlbnRGaWxlLl9pZCA9ICQoJ2lucHV0LmZpZWxkLl9pZCcpLnZhbCgpOw0KICAgICAgY3VycmVudEZpbGUudHlwZSA9ICQoJ3NlbGVjdC5maWVsZC50eXBlJykuZmluZCgiOnNlbGVjdGVkIikudmFsKCk7DQogICAgICANCiAgICAgIGlmIChjdXJyZW50RmlsZS50eXBlID09ICJ0ZXh0L2h0bWwiKSB7DQogICAgICAgIGN1cnJlbnRGaWxlLmJvZHkgPSAnPCFkb2N0eXBlIGh0bWw+XHJcbiA8aHRtbCBsYW5nPSJlbiI+XHJcbiBcdDxoZWFkPlxyXG4gXHRcdDxtZXRhIGNoYXJzZXQ9IlVURi04Ij5cclxuIFx0XHQ8dGl0bGU+RG9jdW1lbnQ8L3RpdGxlPlxyXG4gXHQ8L2hlYWQ+XHJcbiBcdDxib2R5PlxyXG4gXHRcdFx0XHJcbiBcdDwvYm9keT5cclxuIDwvaHRtbD5cclxuJzsNCiAgICAgICAgY3VycmVudEZpbGUuZWRpdG9yTGluZSA9IDc7DQogICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGaWxlLnR5cGUgPT0gImFwcGxpY2F0aW9uL2phdmFzY3JpcHQiKSB7DQogICAgICAgIGN1cnJlbnRGaWxlLmJvZHkgPSAnJzsNCiAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZpbGUudHlwZSA9PSAidGV4dC9jc3MiKSB7DQogICAgICAgIGN1cnJlbnRGaWxlLmJvZHkgPSAnJzsNCiAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZpbGUudHlwZSA9PSAidGV4dC9wbGFpbiIpIHsNCiAgICAgICAgY3VycmVudEZpbGUuYm9keSA9ICcnOw0KICAgICAgfSBlbHNlIGlmIChjdXJyZW50RmlsZS50eXBlID09ICJhcHBsaWNhdGlvbi9qc29uIikgew0KICAgICAgICBjdXJyZW50RmlsZS5ib2R5ID0gJ3tcclxuXHRcclxufSc7DQogICAgICAgIGN1cnJlbnRGaWxlLmVkaXRvckxpbmUgPSAxOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgY3VycmVudEZpbGUuYm9keSA9ICcnOw0KICAgICAgfQ0KICAgICAgDQogICAgICBpbml0RWRpdG9yKCk7DQogICAgICBzYXZlRmlsZSgpOw0KICAgICAgZ2V0RmlsZXMoKTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gZmFkZU91dE1vZGFsKCkgew0KICAgICAgJCgnLm1vZGFsJykuZmFkZU91dCgnZmFzdCcpOw0KICAgICAgJCgnc2VjdGlvbi5lZGl0b3InKS5jc3MoJy13ZWJraXQtZmlsdGVyJywgJ25vbmUnKTsNCiAgICB9DQogICAgDQogICAgLy8gSW5pdGlhbGlzYXRpb24gZnVuY3Rpb25zDQogICAgDQogICAgZnVuY3Rpb24gaW5pdEVkaXRvcigpIHsNCiAgICAgIGNvbnNvbGUubG9nKCJMb2FkZWQ6ICIgKyBKU09OLnN0cmluZ2lmeShjdXJyZW50RmlsZSkpOw0KICAgICAgZWRpdG9yID0gYWNlLmVkaXQoImVkaXRvciIpOw0KICAgICAgZWRpdG9yLnJlc2l6ZSgpDQogICAgICBlZGl0b3Iuc2V0VGhlbWUoImFjZS90aGVtZS9zb2xhcml6ZWRfZGFyayIpOw0KICAgICAgaWYgKGN1cnJlbnRGaWxlLnR5cGUgPT0gInRleHQvaHRtbCIpIHsNCiAgICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKCJhY2UvbW9kZS9odG1sIik7DQogICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGaWxlLnR5cGUgPT0gImFwcGxpY2F0aW9uL2phdmFzY3JpcHQiKSB7DQogICAgICAgIGVkaXRvci5nZXRTZXNzaW9uKCkuc2V0TW9kZSgiYWNlL21vZGUvamF2YXNjcmlwdCIpOw0KICAgICAgfSBlbHNlIGlmIChjdXJyZW50RmlsZS50eXBlID09ICJ0ZXh0L2NzcyIpIHsNCiAgICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKCJhY2UvbW9kZS9jc3MiKTsNCiAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZpbGUudHlwZSA9PSAidGV4dC9wbGFpbiIpIHsNCiAgICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKCJhY2UvbW9kZS90ZXh0Iik7DQogICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGaWxlLnR5cGUgPT0gImFwcGxpY2F0aW9uL2pzb24iKSB7DQogICAgICAgIGVkaXRvci5nZXRTZXNzaW9uKCkuc2V0TW9kZSgiYWNlL21vZGUvanNvbiIpOw0KICAgICAgfSBlbHNlIGlmIChjdXJyZW50RmlsZS50eXBlID09ICJ0ZXh0L3gtbWFya2Rvd24iKSB7DQogICAgICAgIGVkaXRvci5nZXRTZXNzaW9uKCkuc2V0TW9kZSgiYWNlL21vZGUvbWFya2Rvd24iKTsNCiAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZpbGUudHlwZSA9PSAidGV4dC94LWhhbmRsZWJhcnMtdGVtcGxhdGUiKSB7DQogICAgICAgIGVkaXRvci5nZXRTZXNzaW9uKCkuc2V0TW9kZSgiYWNlL21vZGUvaGFuZGxlYmFycyIpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKCJhY2UvbW9kZS9wbGFpbiIpOw0KICAgICAgfQ0KICAgICAgZWRpdG9yLnNldFZhbHVlKGN1cnJlbnRGaWxlLmJvZHkpOw0KICAgICAgDQogICAgICBlZGl0b3IuZ2V0U2Vzc2lvbigpLnNldFVzZVNvZnRUYWJzKHRydWUpOw0KICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRUYWJTaXplKDIpOw0KICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRVc2VXcmFwTW9kZSh0cnVlKTsNCiAgICAgIA0KICAgICAgZWRpdG9yLmdvdG9MaW5lKGN1cnJlbnRGaWxlLmVkaXRvckxpbmUgKyAxKTsNCiAgICAgICQoJ2gyLmZpbGVuYW1lJykuaHRtbChjdXJyZW50RmlsZS5faWQpOw0KICAgIH0NCiAgICANCiAgPC9zY3JpcHQ+DQogICAgDQo8L2JvZHk+DQo8L2h0bWw+"
    }
  }
}