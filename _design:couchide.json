{
 "comment": "This is the CouchIDE design doc, when placed in a database it creates a sort of webserver for you.\nDocumentation at: https://github.com/vhv/CouchIDE",
 "_id": "_design/couchide",
 "views": {
 "type-doc": {
 "map": "function(doc) { emit(doc.type, doc) }"
 }
 },
 "rewrites": [
   {
     "from": "/couchide",
     "to": "couch.ide"
   },
   {
     "from": "/couchide/*",
     "to": "couch.ide"
   },
   {
     "from": "/",
     "to": "_show/render/index.html"
   },
   {
     "from": "/_session/",
     "to": "../../../_session/"
   },
   {
     "from": "/api/",
     "to": "../../../"
   },
   {
     "from": "/*",
     "to": "_show/render/*"
   }
 ],
 "shows": {
   "render": "function(doc, req) { return { \"headers\": { \"Content-Type\": doc.type }, \"body\": doc.body } }"
  },
  "_attachments": {
    "couch.ide": {
      "content_type": "text/html",
      "data": "PCFET0NUWVBFIGh0bWw+DQo8aHRtbCBsYW5nPSJlbiI+DQo8aGVhZD4NCiAgPG1ldGEgY2hhcnNldD0idXRmLTgiPg0KICA8dGl0bGU+Q291Y2hJREU8L3RpdGxlPg0KICANCiAgPHN0eWxlPg0KICAgIA0KICAgIEBpbXBvcnQgdXJsKGh0dHA6Ly93ZWxvdmVpY29uZm9udHMuY29tL2FwaS8/ZmFtaWx5PWVudHlwbyk7DQogICAgQGltcG9ydCB1cmwoaHR0cDovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9U291cmNlK1NhbnMrUHJvOjIwMCw0MDAsNjAwfFNvdXJjZStDb2RlK1Bybyk7DQogICAgDQogICAgDQogICAgLyogZW50eXBvICovDQogICAgW2NsYXNzKj0iZW50eXBvLSJdOmJlZm9yZSB7DQogICAgICBmb250LWZhbWlseTogJ2VudHlwbycsIHNhbnMtc2VyaWY7DQogICAgICBtYXJnaW4tcmlnaHQ6IDAuNWVtOw0KICAgIH0NCiAgICANCiAgICBoMSwgaDIsIGgzLCBoNCB7DQogICAgICBmb250LXdlaWdodDogNDAwOw0KICAgICAgbWFyZ2luOiAwOw0KICAgIH0NCiAgICANCiAgICBib2R5IHsNCiAgICAgIGZvbnQtZmFtaWx5OiAiU291cmNlIFNhbnMgUHJvIjsNCiAgICAgIG1hcmdpbjogMzBweCAzMjBweCA0MHB4IDA7DQogICAgICBmb250LXNpemU6IDE0cHg7DQogICAgICBiYWNrZ3JvdW5kOiBoc2xhKDAsMCUsOTUlLDEpOw0KICAgIH0NCiAgICBhIHsNCiAgICAgICAgY29sb3I6ICNkNDE0NWE7DQogICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsNCiAgICB9DQogICAgaW5wdXQgew0KICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICB3aWR0aDogMTAwJTsNCiAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICB9DQogICAgdGV4dGFyZWEgew0KICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICB3aWR0aDogMTAwJTsNCiAgICAgIGhlaWdodDogYXV0bzsNCiAgICAgIGZvbnQtc2l6ZTogMTZweDsNCiAgICB9DQogICAgLmJvZHkgdGV4dGFyZWEgew0KICAgICAgZm9udC1mYW1pbHk6ICJTb3VyY2UgQ29kZSBQcm8iOw0KICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgcGFkZGluZzogMWVtOw0KICAgIA0KICAgICAgbWluLWhlaWdodDogNDAwcHg7DQogICAgfQ0KICAgIA0KICAgIHNlY3Rpb24uc2lkZWJhciB7DQogICAgICBmb250LWZhbWlseTogIlNvdXJjZSBTYW5zIFBybyI7DQogICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgcmlnaHQ6IDA7DQogICAgICB3aWR0aDogMzAwcHg7DQogICAgICBib3R0b206IDA7DQogICAgICB0b3A6IDQwcHg7DQogICAgICBiYWNrZ3JvdW5kOiBoc2xhKDAsMCUsOTAlLDEpOw0KICAgICAgcGFkZGluZzogMjBweDsNCiAgICAgIGhlaWdodDogMTAwJTsNCiAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgaHNsYSgwLDAlLDcwJSwxKTsNCiAgICB9DQogICAgLnNpZGViYXIgdWwgew0KICAgICAgcGFkZGluZzogMDsNCiAgICB9DQogICAgLnNpZGViYXIgbGkgew0KICAgICAgbGlzdC1zdHlsZTogbm9uZTsNCiAgICAgIHBhZGRpbmc6IDAuNWVtIDA7DQogICAgfQ0KICAgIC5zaWRlYmFyIGxpOmJlZm9yZSB7DQogICAgICBmb250LWZhbWlseTogJ2VudHlwbyc7DQogICAgICBjb250ZW50OiAiXDFGNEM0IjsNCiAgICAgIG1hcmdpbi1yaWdodDogMC41ZW07DQogICAgICBjb2xvcjogI2Q0MTQ1YTsNCiAgICB9DQogICAgLnNpZGViYXIgbGk6aG92ZXI6YmVmb3JlIHsNCiAgICAgIGNvbnRlbnQ6ICJcMjcwRSI7DQogICAgICBvcGFjaXR5OiAxOw0KICAgIH0NCiAgICBhLm5ld2ZpbGU6YmVmb3JlIHsNCiAgICAgIGZvbnQtZmFtaWx5OiAnZW50eXBvJzsNCiAgICAgIGNvbnRlbnQ6ICJcMjI5RSI7DQogICAgICBtYXJnaW4tcmlnaHQ6IDAuNWVtOw0KICAgICAgY29sb3I6ICNkNDE0NWE7DQogICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7DQogICAgfQ0KICAgIA0KICAgIC50b3BiYXIgew0KICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgIHRvcDogMDsNCiAgICAgIGxlZnQ6IDA7DQogICAgICByaWdodDogMDsNCiAgICAgIGhlaWdodDogNDBweDsNCiAgICAgIGJhY2tncm91bmQ6IGhzbGEoMCwwJSwyMCUsMSk7DQogICAgICBjb2xvcjogd2hpdGU7DQogICAgICBwYWRkaW5nOiAxMXB4Ow0KICAgIH0NCiAgICBoMSB7DQogICAgICBkaXNwbGF5OiBpbmxpbmU7DQogICAgICBwYWRkaW5nOiAwOw0KICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgbWFyZ2luOiAwOw0KICAgICAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgICAgIG1hcmdpbi1yaWdodDogMzBweDsNCiAgICB9DQogICAgaDEgYTpsaW5rLCBoMSBhOnZpc2l0ZWQgew0KICAgICAgY29sb3I6IHdoaXRlOw0KICAgIH0NCiAgICBoMi5maWxlbmFtZSB7DQogICAgICBkaXNwbGF5OiBpbmxpbmU7DQogICAgICBwYWRkaW5nOiAwOw0KICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgbWFyZ2luOiAwOw0KICAgICAgZm9udC13ZWlnaHQ6IDIwMDsNCiAgICB9DQogICAgaDIuZmlsZW5hbWU6YmVmb3JlIHsNCiAgICAgIGZvbnQtZmFtaWx5OiAnZW50eXBvJzsNCiAgICAgIGNvbnRlbnQ6ICJcMjcwRSI7DQogICAgICBtYXJnaW4tcmlnaHQ6IDAuNWVtOw0KICAgIH0NCiAgICANCiAgICAubW9kYWwgew0KICAgICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgd2lkdGg6IDQwMHB4Ow0KICAgICAgbGVmdDo1MCU7DQogICAgICB0b3A6IDUwJTsNCiAgICAgIG1hcmdpbi1sZWZ0Oi0yMDBweDsNCiAgICAgIG1hcmdpbi10b3A6IC0xMDBweDsNCiAgICAgIGJhY2tncm91bmQ6ICNlZWU7DQogICAgICB6LWluZGV4OiAxMDA7DQogICAgICBwYWRkaW5nOiA0MHB4Ow0KICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgYm9yZGVyLXJhZGl1czogMnB4Ow0KICAgICAgYm94LXNoYWRvdzogMHB4IDBweCAxMHB4IGhzbGEoMCwwJSwwJSwwLjMpOw0KICAgICAgYm9yZGVyOiAxcHggc29saWQgaHNsYSgwLDAlLDcwJSwxKTsNCiAgICB9DQogICAgDQogICAgLmVkaXQgew0KICAgICAgcGFkZGluZzogMjBweDsNCiAgICAgIHotaW5kZXg6IC0xMDA7DQogICAgfQ0KICAgIA0KICAgIC5ib3R0b21iYXIgew0KICAgICAgZm9udC1mYW1pbHk6ICJTb3VyY2UgU2FucyBQcm8iOw0KICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgYm90dG9tOiAwOw0KICAgICAgbGVmdDogMDsNCiAgICAgIHJpZ2h0OiAzMDBweDsNCiAgICAgIGJhY2tncm91bmQ6IGhzbGEoMCwwJSw5NSUsMSk7DQogICAgICBib3JkZXItdG9wOiAxcHggc29saWQgaHNsYSgwLDAlLDcwJSwxKTsNCiAgICAgIG1hcmdpbjogMDsNCiAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICBoZWlnaHQ6IDQwcHg7DQogICAgfQ0KICAgIA0KICAgIGJ1dHRvbiB7DQogICAgICBkaXNwbGF5OiBpbmxpbmU7DQogICAgICBib3JkZXI6IDFweCBzb2xpZCBoc2xhKDAsMCUsNzAlLDEpOw0KICAgICAgYm9yZGVyLXJhZGl1czogM3B4Ow0KICAgICAgYmFja2dyb3VuZDogaHNsYSgwLDAlLDEwMCUsMCk7DQogICAgICBmb250LWZhbWlseTogIlNvdXJjZSBTYW5zIFBybyI7DQogICAgICBmb250LXdlaWdodDogNDAwOw0KICAgICAgZm9udC1zaXplOiAxZW07DQogICAgICBtaW4td2lkdGg6IDEwMHB4Ow0KICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgIHBhZGRpbmc6IDdweCAyMHB4IDdweCAxMHB4Ow0KICAgIH0NCiAgICBidXR0b246aG92ZXIgew0KICAgICAgYmFja2dyb3VuZDogaHNsYSgwLDAlLDEwMCUsMC43KTsNCiAgICB9DQogICAgZGl2LnNhdmUgew0KICAgICAgZmxvYXQ6IHJpZ2h0Ow0KICAgICAgcGFkZGluZzogMHB4Ow0KICAgIH0NCiAgICBidXR0b24uc2F2ZSB7DQogICAgICBjb2xvcjogaHNsYSgxNDgsMTAwJSwyOCUsMSk7DQogICAgICBmb250LXdlaWdodDogNjAwOw0KICAgIH0NCiAgICBidXR0b24uZGVsZXRlIHsNCiAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7DQogICAgfQ0KICAgIC5kZWxldGUgYnV0dG9uLnllcyB7DQogICAgICBjb2xvcjogaHNsYSgzNTUsODQlLDQwJSwxKQ0KICAgIH0NCiAgICBkaXYuZGVsZXRlZCB7DQogICAgICBmbG9hdDogbGVmdDsNCiAgICAgIHBhZGRpbmc6IDBweDsNCiAgICB9DQogICAgZGl2LnN0YXR1cyB7DQogICAgICBjb2xvcjogaHNsYSgwLDAlLDAlLDEpOw0KICAgICAgZmxvYXQ6IHJpZ2h0Ow0KICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICBwYWRkaW5nOiAxMHB4IDEwcHggMjBweCAxMHB4Ow0KICAgIH0NCiAgICBkaXYuc3RhdHVzIHAgew0KICAgICAgZm9udC13ZWlnaHQ6IDQwMDsNCiAgICAgIG1hcmdpbjogMDsNCiAgICAgIHBhZGRpbmc6IDA7DQogICAgfQ0KICAgIA0KICAgIFtjb250ZW50ZWRpdGFibGVdLCB0ZXh0YXJlYSwgaW5wdXQgew0KICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgIC1tb3otYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgIGJvcmRlcjogMnB4IHNvbGlkIGhzbGEoMzM0LDg1JSw1MiUsMC4xKTsNCiAgICAgIC8qbWFyZ2luOiAtNXB4IC01cHggLTVweCAtNXB4OyovDQogICAgICBtYXJnaW4tdG9wOiAtNXB4Ow0KICAgICAgbWFyZ2luLXJpZ2h0OiAtNXB4Ow0KICAgICAgbWFyZ2luLWxlZnQ6IC01cHg7DQogICAgICBwYWRkaW5nOiA1cHg7DQogICAgICBvdXRsaW5lOiBub25lOw0KICAgIH0NCiAgICANCiAgICBbY29udGVudGVkaXRhYmxlXTpob3ZlciwgdGV4dGFyZWE6aG92ZXIsIGlucHV0OmhvdmVyIHsNCiAgICAgIGJvcmRlcjogMnB4IHNvbGlkIGhzbGEoMzM0LDg1JSw1MiUsMC41KTsNCiAgICAgIG91dGxpbmU6IG5vbmU7DQogICAgfQ0KICAgIA0KICAgIFtjb250ZW50ZWRpdGFibGVdOmZvY3VzLCB0ZXh0YXJlYTpmb2N1cywgaW5wdXQ6Zm9jdXMgew0KICAgICAgYm9yZGVyOiAycHggc29saWQgaHNsYSgzMzQsODUlLDUyJSwxKTsNCiAgICAgIG91dGxpbmU6IG5vbmU7DQogICAgfQ0KICAgIA0KICAgIHNlY3Rpb24uZWRpdG9yIHsNCiAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgIGxlZnQ6IDA7DQogICAgICB0b3A6IDQwcHg7DQogICAgICBib3R0b206IDYxcHg7DQogICAgICByaWdodDogMjgwcHg7DQogICAgICB6LWluZGV4OiAtMTAwOw0KICAgIH0NCiAgICAjZWRpdG9yIHsgDQogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7DQogICAgICBsZWZ0OiAwOw0KICAgICAgdG9wOiAwOw0KICAgICAgYm90dG9tOiAwOw0KICAgICAgcmlnaHQ6IDA7DQogICAgfQ0KICAgIA0KICAgIEBtZWRpYSAobWF4LXdpZHRoOiA2MDBweCkgew0KICAgICAgYm9keSwgLm1vZGFsLCAudG9wYmFyLCBzZWN0aW9uLnNpZGViYXIsIHNlY3Rpb24uZWRpdG9yLCAuYm90dG9tYmFyIHsNCiAgICAgICAgZGlzcGxheTogYmxvY2s7DQogICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgICAgICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgaGVpZ2h0OiBhdXRvOw0KICAgICAgICBtYXJnaW46IDA7DQogICAgICAgIGxlZnQ6IDA7DQogICAgICAgIHRvcDogMDsNCiAgICAgICAgYm90dG9tOiAwOw0KICAgICAgICByaWdodDogMDsNCiAgICAgIH0NCiAgICAgIHNlY3Rpb24uZWRpdG9yIHsNCiAgICAgICAgei1pbmRleDogMTAwOw0KICAgICAgfQ0KICAgICAgLmJvdHRvbWJhciAuZGVsZXRlZCwgLmJvdHRvbWJhciAuZGVsZXRlLCAuYm90dG9tYmFyIC5zYXZlLCAuYm90dG9tYmFyIGRpdi5zdGF0dXMgew0KICAgICAgICB3aWR0aDogMTAwJTsNCiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgICAgICBkaXNwbGF5OiBibG9jazsNCiAgICAgICAgZmxvYXQ6IG5vbmU7DQogICAgICB9DQogICAgfQ0KICAgIA0KICA8L3N0eWxlPg0KICANCiAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9ImluaXRpYWwtc2NhbGU9MSI+DQoNCjwvaGVhZD4NCjxib2R5Pg0KICA8c2VjdGlvbiBjbGFzcz0idG9wYmFyIj4NCiAgICAgPGgxPg0KICAgICAgICBDb3VjaElERQ0KICAgICA8L2gxPg0KICAgICA8aDIgY2xhc3M9ImZpbGVuYW1lIj4NCiAgICAgICAgIA0KICAgICA8L2gyPg0KICA8L3NlY3Rpb24+DQogICAgICANCiAgPGRpdiBjbGFzcz0ibW9kYWwgbmV3ZmlsZSI+DQogICAgPHA+V2hhdCBuYW1lIHNob3VsZCB5b3VyIGZpbGUgaGF2ZT88L3A+DQogICAgPGlucHV0IG5hbWU9Il9pZCIgY2xhc3M9ImZpZWxkIF9pZCIgcGxhY2Vob2xkZXI9IkZpbGVuYW1lIj4NCiAgICA8c2VsZWN0IGNsYXNzPSJmaWVsZCB0eXBlIj4NCiAgICAgIDxvcHRpb24gdmFsdWU9InRleHQvcGxhaW4iPlBsYWluIHRleHQ8L29wdGlvbj4NCiAgICAgIDxvcHRpb24gdmFsdWU9InRleHQvaHRtbCI+SFRNTDwvb3B0aW9uPg0KICAgICAgPG9wdGlvbiB2YWx1ZT0idGV4dC9jc3MiPkNTUzwvb3B0aW9uPg0KICAgICAgPG9wdGlvbiB2YWx1ZT0iYXBwbGljYXRpb24vamF2YXNjcmlwdCI+SmF2YXNjcmlwdDwvb3B0aW9uPg0KICAgICAgPG9wdGlvbiB2YWx1ZT0iYXBwbGljYXRpb24vanNvbiI+SlNPTjwvb3B0aW9uPg0KICAgIDwvc2VsZWN0Pg0KICAgIDxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0ibmV3ZmlsZSBlbnR5cG8tcGx1cyI+Q3JlYXRlIGZpbGU8L2J1dHRvbj4NCiAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImNhbmNlbCI+Tm8sIENhbmNlbDwvYnV0dG9uPg0KICA8L2Rpdj4gICAgDQogIA0KICA8ZGl2IGNsYXNzPSJtb2RhbCBkZWxldGUiPg0KICAgIDxwPkFyZSB5b3Ugc3VyZSB5b3Ugd2lzaCB0byBkZWxldGUgdGhpcyBmaWxlPzwvcD4NCiAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InllcyBlbnR5cG8tZXJhc2UiPlllcywgRGVsZXRlPC9idXR0b24+DQogICAgPGJ1dHRvbiB0eXBlPSJidXR0b24iIGNsYXNzPSJjYW5jZWwiPk5vLCBDYW5jZWw8L2J1dHRvbj4NCiAgPC9kaXY+ICAgIA0KDQogIDxzZWN0aW9uIGNsYXNzPSJzaWRlYmFyIj4NCiAgICA8aDI+RmlsZXM6PC9oMj4NCiAgICA8dWwgY2xhc3M9ImZpbGVzIj4NCiAgICAgIDxsaT5ObyBmaWxlczwvbGk+DQogICAgPC91bD4NCiAgICA8YSBocmVmPSIjL25ldyIgY2xhc3M9Im5ld2ZpbGUiPk5ldyBmaWxlPC9hPg0KICA8L3NlY3Rpb24+DQogIA0KICA8c2VjdGlvbiBjbGFzcz0iYm90dG9tYmFyIj4NCiAgICA8ZGl2IGNsYXNzPSJzYXZlIj4NCiAgICAgICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiIGNsYXNzPSJzYXZlIGVudHlwby1jaGVjayI+U2F2ZTwvYnV0dG9uPg0KICAgIDwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9InN0YXR1cyI+PHAgY2xhc3M9ImVudHlwby1hdHRlbnRpb24iPkVkaXRvciBub3QgbG9hZGVkIHlldCE8L3A+PC9kaXY+DQogICAgPGRpdiBjbGFzcz0iZGVsZXRlZCI+DQogICAgICA8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9ImRlbGV0ZSBlbnR5cG8tY2FuY2VsLWNpcmNsZWQiPkRlbGV0ZTwvYnV0dG9uPg0KICAgIDwvZGl2Pg0KICA8L3NlY3Rpb24+DQoNCiAgPHNlY3Rpb24gY2xhc3M9ImVkaXRvciI+PGRpdiBpZD0iZWRpdG9yIj5QbGVhc2Ugb3BlbiBhIGZpbGUhPC9kaXY+PC9zZWN0aW9uPg0KICANCiAgPHNjcmlwdCBzcmM9Ii8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2pxdWVyeS8yLjAuMy9qcXVlcnkubWluLmpzIiB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIGNoYXJzZXQ9InV0Zi04Ij48L3NjcmlwdD4NCiAgPHNjcmlwdCBzcmM9Ii8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2FjZS8xLjEuMDEvYWNlLmpzIiB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIGNoYXJzZXQ9InV0Zi04Ij48L3NjcmlwdD4NCiAgPHNjcmlwdCBzcmM9Ii8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL21vbWVudC5qcy8yLjIuMS9tb21lbnQubWluLmpzIiB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIGNoYXJzZXQ9InV0Zi04Ij48L3NjcmlwdD4NCg0KICA8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2phdmFzY3JpcHQiPg0KICAgIA0KICAgIC8vIFNldCBFbXB0eSBGaWxlDQoNCiAgICB2YXIgZW1wdHlGaWxlID0gew0KICAgICAgYm9keTogIiIsDQogICAgICB0eXBlOiAidGV4dC9wbGFpbiIsDQogICAgICBfaWQ6ICIiLA0KICAgICAgX2RlbGV0ZWQ6IGZhbHNlLA0KICAgICAgZWRpdG9yTGluZTogMCwNCiAgICAgIGVkaXRvckxhc3RTYXZlZDogIiINCiAgICB9Ow0KICAgIHZhciBjdXJyZW50RmlsZSA9IGVtcHR5RmlsZTsNCiAgICB2YXIgZWRpdG9yOw0KICAgIA0KICAgIC8vIFNldCBuYW1lIG9mIHJld3JpdGUgcnVsZXMNCiAgICANCiAgICB2YXIgZWRpdG9yUmV3cml0ZSA9ICdfcmV3cml0ZS9jb3VjaGlkZS8nDQogICAgDQogICAgLy8gR2V0IGN1cnJlbnQgVVJMDQogICAgDQogICAgdmFyIGN1cnJlbnRVcmwgPSAkKGxvY2F0aW9uKS5hdHRyKCdocmVmJyk7DQogICAgdmFyIGN1cnJlbnRGaWxlUGFydHMgPSBjdXJyZW50VXJsLnNwbGl0KGVkaXRvclJld3JpdGUpOyAvL1VzZQ0KICAgIHZhciBjdXJyZW50RmlsZU5hbWUgPSBjdXJyZW50RmlsZVBhcnRzW2N1cnJlbnRGaWxlUGFydHMubGVuZ3RoIC0gMV07DQogICAgdmFyIGN1cnJlbnREZXNpZ25Eb2MgPSBjdXJyZW50RmlsZVBhcnRzWzBdOw0KICAgIHZhciBjdXJyZW50RmlsZVBhcnRzID0gY3VycmVudFVybC5zcGxpdCgnLycpOyAvL1JldXNlDQogICAgdmFyIGN1cnJlbnREYXRhYmFzZSA9IGN1cnJlbnRGaWxlUGFydHNbM107DQogICAgdmFyIGN1cnJlbnRGaWxlUGFydHMgPSAiIjsgLy9EZXN0cm95DQogICAgdmFyIGN1cnJlbnRFZGl0b3JVcmwgPSBjdXJyZW50RGVzaWduRG9jICsgZWRpdG9yUmV3cml0ZTsNCiAgICANCiAgICAvLyBDb2RlIHRvIHBlcmZvcm0gb24gZG9jdW1lbnQgcmVhZHkNCiAgICANCiAgICAkKCBkb2N1bWVudCApLnJlYWR5KGZ1bmN0aW9uKCkgew0KICAgICAgJCgnLm1vZGFsJykuaGlkZSgpOw0KICAgICAgLyogJCgnZGl2Lm5ld2ZpbGUnKS5mYWRlSW4oKTsNCiAgICAgICAgICQoJ2Rpdi5zdGF0dXMnKQ0KICAgICAgICAgICAuaHRtbCgnPHAgY2xhc3M9ImVudHlwby1hdHRlbnRpb24iPk5vIGZpbGUgb3BlbiE8L3A+JykNCiAgICAgICAgICAgLmZhZGVUbyggInNsb3ciICwgMC4yNCApOyAqLw0KICAgICAgDQogICAgICANCiAgICAgIC8vIENsaWNrIGhhbmRsZXJzDQogICAgICANCiAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICJ1bC5maWxlcyBsaSBhIiwgZnVuY3Rpb24oKSB7DQogICAgICAgIHZhciBsb2FkID0gJCh0aGlzKS5kYXRhKCdmaWxlJyk7DQogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgIGNvbnNvbGUubG9nKA0KICAgICAgICAiY2xpY2s6ICIgKyBsb2FkDQogICAgICAgICk7DQogICAgICAgIGxvYWRGaWxlKGxvYWQpOw0KICAgICAgfSk7DQogICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAiYnV0dG9uLnNhdmUiLCBmdW5jdGlvbigpIHsNCiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgc2F2ZUZpbGUoKTsNCiAgICAgIH0pOw0KICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgImJ1dHRvbi5kZWxldGUiLCBmdW5jdGlvbigpIHsNCiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgJCgnZGl2LmRlbGV0ZScpLmZhZGVJbignZmFzdCcpOw0KICAgICAgfSk7DQogICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAiZGl2LmRlbGV0ZSBidXR0b24ueWVzIiwgZnVuY3Rpb24oKSB7DQogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgIGRlbGV0ZUZpbGUoKTsNCiAgICAgIH0pOw0KICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgImJ1dHRvbi5jYW5jZWwiLCBmdW5jdGlvbigpIHsNCiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgZmFkZU91dE1vZGFsKCkNCiAgICAgIH0pOw0KICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgImJ1dHRvbi5uZXdmaWxlIiwgZnVuY3Rpb24oKSB7DQogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgIG5ld0ZpbGUoKTsNCiAgICAgIH0pOw0KICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgImEubmV3ZmlsZSIsIGZ1bmN0aW9uKCkgew0KICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAkKCdkaXYubmV3ZmlsZScpLmZhZGVJbignZmFzdCcpOw0KICAgICAgfSk7DQogICAgICANCiAgICAgIC8vIExvYWQgZmlsZXMgbWVudQ0KICAgICAgDQogICAgICBnZXRGaWxlcygpOw0KICAgICAgDQogICAgICAvLyBJZiBhIG5hbWUgaXMgZW50ZXJlZCBpbiB0aGUgYWRkcmVzc2JhciBvcGVuIHRoYXQgZmlsZQ0KICAgICAgDQogICAgICBpZiAoIGN1cnJlbnRGaWxlTmFtZSAhPSBmYWxzZSApIHsNCiAgICAgICAgbG9hZEZpbGUoY3VycmVudEZpbGVOYW1lKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxvYWRGaWxlKCdDb3VjaElERSBXZWxjb21lIHBhZ2UnKTsNCiAgICAgIH0NCiAgICAgIA0KICAgIH0pOw0KICAgIA0KICAgIC8vIEZpbGUgbWFuaXB1bGF0aW9uIGZ1bmN0aW9ucw0KICAgIA0KICAgIGZ1bmN0aW9uIGdldEZpbGVzKCkgew0KICAgICAgcmV0dXJuICQuZ2V0SlNPTignL2NvdWNoLWlkZS9fZGVzaWduL2lkZS9fdmlldy90eXBlLWRvYycsIA0KICAgICAgICBmdW5jdGlvbihqc29uLCB0ZXh0U3RhdHVzKSB7DQogICAgICAgICAgLy8gY29uc29sZS5sb2coanNvbik7DQogICAgICAgICAgJCgndWwuZmlsZXMnKS5odG1sKCcnKQ0KICAgICAgICAgICQuZWFjaChqc29uLnJvd3MsIGZ1bmN0aW9uKGluZGV4LCB2YWwpIHsNCiAgICANCiAgICAgICAgICAgIC8qIGl0ZXJhdGUgdGhyb3VnaCBhcnJheSBvciBvYmplY3QgKi8NCiAgICAgICAgICAgICQoJ3VsLmZpbGVzJykNCiAgICAgICAgICAgIC5hcHBlbmQoDQogICAgICAgICAgICAgICc8bGk+IDxhIGhyZWY9IicNCiAgICAgICAgICAgICAgKyB2YWwuaWQNCiAgICAgICAgICAgICAgKyAnIiBkYXRhLWZpbGU9IicNCiAgICAgICAgICAgICAgKyB2YWwuaWQNCiAgICAgICAgICAgICAgKyAnIj4nDQogICAgICAgICAgICAgICsgdmFsLmlkDQogICAgICAgICAgICAgICsgJzwvYT48L2xpPicNCiAgICAgICAgICAgICkNCiAgICAgICAgICB9DQogICAgICAgICk7DQogICAgICB9KTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gbG9hZEZpbGUoZmlsZSkgew0KICAgICAgZmFkZU91dE1vZGFsKCkNCiAgICAgIHJldHVybiAkLmdldEpTT04oJy8nICsgY3VycmVudERhdGFiYXNlICsgJy8nICsgZmlsZSwgDQogICAgICAgIGZ1bmN0aW9uKGpzb24sIHRleHRTdGF0dXMpIHsNCiAgICAgICAgICBjdXJyZW50RmlsZSA9IHt9Ow0KICAgICAgICAgIGN1cnJlbnRGaWxlID0ganNvbjsNCiAgICAgICAgICBpbml0RWRpdG9yKCk7DQogICAgICAgICAgZ2V0RmlsZXMoKTsNCiAgICAgICAgICAkKCdkaXYuc3RhdHVzJykNCiAgICAgICAgICAgIC5odG1sKA0KICAgICAgICAgICAgICAnPHAgY2xhc3M9ImVudHlwby1jbG91ZCI+RmlsZSBsYXN0IHNhdmVkOiAnIA0KICAgICAgICAgICAgICArIG1vbWVudChjdXJyZW50RmlsZS5lZGl0b3JMYXN0U2F2ZWQpLmZyb21Ob3coKSANCiAgICAgICAgICAgICAgKyAnPC9wPicNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIC5mYWRlVG8oICJmYXN0IiAsIDAuMzMgKQ0KICAgICAgICAgICAgLmZhZGVUbyggInNsb3ciICwgMC4yNCApOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoIHt9LCAnQ291Y2hJREU6ICcgKyBmaWxlICwgY3VycmVudEVkaXRvclVybCArIGZpbGUgKTsNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICB9DQogICAgDQogICAgZnVuY3Rpb24gc2F2ZUZpbGUoKSB7DQogICAgICBpZiAoY3VycmVudEZpbGUuX2lkICE9IGZhbHNlKSB7DQogICAgICAgICQoJ2Rpdi5zdGF0dXMnKQ0KICAgICAgICAgIC5odG1sKCc8cCBjbGFzcz0iZW50eXBvLXVwbG9hZC1jbG91ZCI+U2F2aW5nPC9wPicpDQogICAgICAgICAgLmZhZGVUbyggImZhc3QiICwgMC41MyApLmRlbGF5KDIwMDApOw0KICAgICAgICBjdXJyZW50RmlsZS5ib2R5ID0gZWRpdG9yLmdldFZhbHVlKCk7DQogICAgICAgIGVkaXRvckN1cnNvciA9IGVkaXRvci5zZWxlY3Rpb24uZ2V0Q3Vyc29yKCk7DQogICAgICAgIGN1cnJlbnRGaWxlLmVkaXRvckxpbmUgPSBlZGl0b3JDdXJzb3Iucm93Ow0KICAgICAgICBjdXJyZW50RmlsZS5lZGl0b3JMYXN0U2F2ZWQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsNCiAgICAgICAgY29uc29sZS5sb2coDQogICAgICAgICAgInNhdmU6ICIgKyBjdXJyZW50RmlsZS5faWQNCiAgICAgICAgKTsNCiAgICAgICAgJC5hamF4KHsNCiAgICAgICAgICB0eXBlOiAiUE9TVCIsDQogICAgICAgICAgdXJsOiAiL2NvdWNoLWlkZS8iLA0KICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGN1cnJlbnRGaWxlKSwNCiAgICAgICAgICBjb250ZW50VHlwZSA6ICJhcHBsaWNhdGlvbi9qc29uIiwNCiAgICAgICAgICBkYXRhVHlwZSA6ICJqc29uIiwNCiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoIGRhdGEgKSB7DQogICAgICAgICAgICAkKCdkaXYuc3RhdHVzJykuaHRtbCgnU2F2ZWQnKTsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJTYXZlZCEiKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOw0KICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YS5fcmV2KTsNCiAgICAgICAgICAgIGxvYWRGaWxlKGN1cnJlbnRGaWxlLl9pZCk7DQogICAgICAgICAgfSwNCiAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAoIHJlc3BvbnNlICkgew0KICAgICAgICAgICAgYWxlcnQoIkVycm9yISBUaGUgbWVzc2FnZSB3YXMgbm90IHNlbnQuIik7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsNCiAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgYWxlcnQoJ1BsZWFzZSBjcmVhdGUgYSBuZXcgZmlsZSBmaXJzdCcpOw0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgICBmdW5jdGlvbiBkZWxldGVGaWxlKCkgew0KICAgICAgY3VycmVudEZpbGUuX2RlbGV0ZWQgPSB0cnVlOw0KICAgICAgc2F2ZUZpbGUoKTsNCiAgICAgIGdldEZpbGVzKCk7DQogICAgICBjdXJyZW50RmlsZSA9IGVtcHR5RmlsZTsNCiAgICAgIGluaXRFZGl0b3IoKTsNCiAgICAgIGdldEZpbGVzKCk7DQogICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIG5ld0ZpbGUoKSB7DQogICAgICBmYWRlT3V0TW9kYWwoKQ0KICAgICAgY3VycmVudEZpbGUgPSBlbXB0eUZpbGU7DQogICAgICBjdXJyZW50RmlsZS5faWQgPSAkKCdpbnB1dC5maWVsZC5faWQnKS52YWwoKTsNCiAgICAgIGN1cnJlbnRGaWxlLnR5cGUgPSAkKCdzZWxlY3QuZmllbGQudHlwZScpLmZpbmQoIjpzZWxlY3RlZCIpLnZhbCgpOw0KICAgICAgDQogICAgICBpZiAoY3VycmVudEZpbGUudHlwZSA9PSAidGV4dC9odG1sIikgew0KICAgICAgICBjdXJyZW50RmlsZS5ib2R5ID0gJzwhZG9jdHlwZSBodG1sPlxyXG4gPGh0bWwgbGFuZz0iZW4iPlxyXG4gXHQ8aGVhZD5cclxuIFx0XHQ8bWV0YSBjaGFyc2V0PSJVVEYtOCI+XHJcbiBcdFx0PHRpdGxlPkRvY3VtZW50PC90aXRsZT5cclxuIFx0PC9oZWFkPlxyXG4gXHQ8Ym9keT5cclxuIFx0XHRcdFxyXG4gXHQ8L2JvZHk+XHJcbiA8L2h0bWw+XHJcbic7DQogICAgICAgIGN1cnJlbnRGaWxlLmVkaXRvckxpbmUgPSA3Ow0KICAgICAgfSBlbHNlIGlmIChjdXJyZW50RmlsZS50eXBlID09ICJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Iikgew0KICAgICAgICBjdXJyZW50RmlsZS5ib2R5ID0gJyc7DQogICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGaWxlLnR5cGUgPT0gInRleHQvY3NzIikgew0KICAgICAgICBjdXJyZW50RmlsZS5ib2R5ID0gJyc7DQogICAgICB9IGVsc2UgaWYgKGN1cnJlbnRGaWxlLnR5cGUgPT0gInRleHQvcGxhaW4iKSB7DQogICAgICAgIGN1cnJlbnRGaWxlLmJvZHkgPSAnJzsNCiAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZpbGUudHlwZSA9PSAiYXBwbGljYXRpb24vanNvbiIpIHsNCiAgICAgICAgY3VycmVudEZpbGUuYm9keSA9ICd7XHJcblx0XHJcbn0nOw0KICAgICAgICBjdXJyZW50RmlsZS5lZGl0b3JMaW5lID0gMTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGN1cnJlbnRGaWxlLmJvZHkgPSAnJzsNCiAgICAgIH0NCiAgICAgIA0KICAgICAgaW5pdEVkaXRvcigpOw0KICAgICAgc2F2ZUZpbGUoKTsNCiAgICAgIGdldEZpbGVzKCk7DQogICAgfQ0KICAgIA0KICAgIGZ1bmN0aW9uIGZhZGVPdXRNb2RhbCgpIHsNCiAgICAgICQoJy5tb2RhbCcpLmZhZGVPdXQoJ2Zhc3QnKTsNCiAgICB9DQogICAgDQogICAgLy8gSW5pdGlhbGlzYXRpb24gZnVuY3Rpb25zDQogICAgDQogICAgZnVuY3Rpb24gaW5pdEVkaXRvcigpIHsNCiAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRGaWxlKTsNCiAgICAgIGVkaXRvciA9IGFjZS5lZGl0KCJlZGl0b3IiKTsNCiAgICAgIGVkaXRvci5yZXNpemUoKQ0KICAgICAgZWRpdG9yLnNldFRoZW1lKCJhY2UvdGhlbWUvc29sYXJpemVkX2RhcmsiKTsNCiAgICAgIGlmIChjdXJyZW50RmlsZS50eXBlID09ICJ0ZXh0L2h0bWwiKSB7DQogICAgICAgIGVkaXRvci5nZXRTZXNzaW9uKCkuc2V0TW9kZSgiYWNlL21vZGUvaHRtbCIpOw0KICAgICAgICBjb25zb2xlLmxvZygiaHRtbCIpOw0KICAgICAgfSBlbHNlIGlmIChjdXJyZW50RmlsZS50eXBlID09ICJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0Iikgew0KICAgICAgICBlZGl0b3IuZ2V0U2Vzc2lvbigpLnNldE1vZGUoImFjZS9tb2RlL2phdmFzY3JpcHQiKTsNCiAgICAgICAgY29uc29sZS5sb2coImphdmFzY3JpcHQiKTsNCiAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZpbGUudHlwZSA9PSAidGV4dC9jc3MiKSB7DQogICAgICAgIGVkaXRvci5nZXRTZXNzaW9uKCkuc2V0TW9kZSgiYWNlL21vZGUvY3NzIik7DQogICAgICAgIGNvbnNvbGUubG9nKCJjc3MiKTsNCiAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZpbGUudHlwZSA9PSAidGV4dC9wbGFpbiIpIHsNCiAgICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKCJhY2UvbW9kZS90ZXh0Iik7DQogICAgICAgIGNvbnNvbGUubG9nKCJwbGFpbnRleHQiKTsNCiAgICAgIH0gZWxzZSBpZiAoY3VycmVudEZpbGUudHlwZSA9PSAiYXBwbGljYXRpb24vanNvbiIpIHsNCiAgICAgICAgZWRpdG9yLmdldFNlc3Npb24oKS5zZXRNb2RlKCJhY2UvbW9kZS9qc29uIik7DQogICAgICAgIGNvbnNvbGUubG9nKCJqc29uIik7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBlZGl0b3IuZ2V0U2Vzc2lvbigpLnNldE1vZGUoImFjZS9tb2RlL3BsYWluIik7DQogICAgICAgIGNvbnNvbGUubG9nKCJub3RoaW5nIik7DQogICAgICB9DQogICAgICBlZGl0b3Iuc2V0VmFsdWUoY3VycmVudEZpbGUuYm9keSk7DQogICAgICANCiAgICAgIGVkaXRvci5nZXRTZXNzaW9uKCkuc2V0VXNlU29mdFRhYnModHJ1ZSk7DQogICAgICBlZGl0b3IuZ2V0U2Vzc2lvbigpLnNldFRhYlNpemUoMik7DQogICAgICBlZGl0b3IuZ2V0U2Vzc2lvbigpLnNldFVzZVdyYXBNb2RlKHRydWUpOw0KICAgICAgDQogICAgICBlZGl0b3IuZ290b0xpbmUoY3VycmVudEZpbGUuZWRpdG9yTGluZSArIDEpOw0KICAgICAgJCgnaDIuZmlsZW5hbWUnKS5odG1sKGN1cnJlbnRGaWxlLl9pZCk7DQogICAgfQ0KICAgIA0KICA8L3NjcmlwdD4NCiAgICANCjwvYm9keT4NCjwvaHRtbD4="
    }
  }
}